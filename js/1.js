(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2326),r=n(2373),i=n(2391),s=n(2312);t.default=function(e){return s.isMobileDevice()?o.createElement(i.default,Object.assign({},e,{childNode:a.default})):o.createElement(i.default,Object.assign({},e,{childNode:r.default}))}},2312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForcePreview=t.isMobileApp=t.isLarkApplets=t.isLarkBrowser=t.validatePageExist=t.moveStart=t.canScrollInMobile=t.isNeedSyncAnimation=t.getGestureDirection=t.calStyle=t.calculateInteractionSize=t.builderPageStyle=t.calcAutoScale=t.isMobileDevice=t.parseAnimate=t.preloadImage=void 0;var o=n(42),a=n(87),r=n(662),i=n(2317),s=n(41),l=n(653),c=n(655);t.preloadImage=function(e,t,n,r){var i=0,s=[],l=n.filter((function(t){return t.pageID===e}));l&&l.forEach((function(e){var n,l,c,u=e.target;if(u!==a.backLink){var d=o.getPage(t,u);(null==d?void 0:d.isLoaded)||(i+=1,n=d,l=new Image,c=function(){0==(i-=1)&&r(s)},l.src=null==n?void 0:n.imageURL,l.onload=function(){s.push(n._id),c()},l.onerror=function(){c()})}}))},t.parseAnimate=function(e,t){var n={first:"",next:""};if(e){var o=e.animate;if(o){var a=r.animateName[o.animation];if(a){var i=r.animateTypes[a].css;if(i){var s=i.first,l=i.next;s&&"overlay"!==o.action&&(n.first="animate-general "+s),l&&(n.next="animate-general "+l),t&&(n.next="animate-general "+r.animateTypes[t].reverseCss.next)}}}}return n},t.isMobileDevice=function(){return null!==navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i)},t.calcAutoScale=function(e,t,n){var o=1;if(e&&t){var a=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(0!==a.height)o=(a.height-40)/(n?r.width:r.height)*100,o-=o%10,o/=100}return o},t.builderPageStyle=function(e){var n=e.appType,o=e.pageSize,r=e.aniDuration,s=e.landscape,c=e.mobileType,u=e.scale,d=o.width*u,p=o.height,f={animationDuration:r,width:d,overflow:"hidden"};if("web"===n||c===l.MOBILE_TYPE_NONE)return f;if(!t.isMobileDevice()){var h=i.default.getShellInfo(c||a.MobileType.iphoneX,s);if(h)return d=h.defaultScreenSize.width,d*=u,f.width=d,f}if(t.isMobileDevice()){var g=window.orientation;if(d=window.innerWidth,p=window.innerHeight,f.width=d,f.height=p,s)switch(g){case 90:break;default:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}else switch(g){case 90:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}}return f},t.calculateInteractionSize=function(e){var n=e.appType,o=e.mobileType,r=e.position,c=e.size,u=e.landscape,d=e.pageSize,p=d,f=e.scale;if(t.isMobileDevice()){var h=window.orientation;p={width:window.innerWidth,height:0},90===h?u||(p.width=window.innerHeight):u&&(p.width=window.innerHeight),f=p.width/d.width,p.height=d.height*f}else if("phone"===n&&o!==l.MOBILE_TYPE_NONE){f*=i.default.getShellInfo(o||a.MobileType.iphoneX,u).defaultScreenSize.width/d.width}var g=s.size.scale(s.size.transToPixed(c,d),f),m=s.point.scale(s.point.transToPixed(r,d),f);return Object.assign({left:m.x,top:m.y},g)};var u=void 0;t.calStyle=function(e,t,n,o){var a={},i={},s="",l="",c=!1;if(t&&e){var d=void 0,p=void 0,f=void 0,h=void 0;u||(u=e);var g=u.animate,m=g.animation,v=g.gesture,w=g.duration;if(!m||!v)return{firstStyle:a,nextStyle:i,firstInitCls:s,nextInitCls:l,skipToNextPage:c};d=m.indexOf("Left")>-1||m.indexOf("Up")>-1||m.indexOf("OutY")>-1||m.indexOf("OutX")>-1?-1:(m.indexOf("Right")>-1||m.indexOf("Down")>-1||m.indexOf("InY")>-1||m.indexOf("InX"),1),v.indexOf("left")>-1||v.indexOf("up")>-1?h=-1:(v.indexOf("right")>-1||v.indexOf("down")>-1)&&(h=1),v.indexOf("left")>-1||v.indexOf("right")>-1?p="deltaX":(v.indexOf("up")>-1||v.indexOf("down")>-1)&&(p="deltaY");var y=r.animateTypes[m].style,b=y.first,P=y.next,S=[];b&&(S=b.split(" "));var E=P.split(" ");m.indexOf("slide")>-1&&(f=!0);var k="firstInit"+m.substring(0,1).toUpperCase()+m.substring(1),O="nextInit"+m.substring(0,1).toUpperCase()+m.substring(1),I="firstLast"+m.substring(0,1).toUpperCase()+m.substring(1),L="nextLast"+m.substring(0,1).toUpperCase()+m.substring(1),T=void 0,_=n[p],C=d*(1-Math.abs(_/o));if(h*_<0&&(C=d),f||(T=-(d-C)),1===S.length?a[S[0]]=1-Math.abs(T):2===S.length&&(a[S[0]]=S[1]+"("+100*T+"%)"),"scale"===S[1]?a[S[0]]=S[1]+"("+(1+T)+")":"rotateY"!==E[1]&&"rotateX"!==E[1]||Math.abs(T)<=.4&&(a[S[0]]=S[1]+"("+216*T+"deg)",i.display="none"),1===E.length?i[E[0]]=1-Math.abs(C):2===S.length&&(i[E[0]]=E[1]+"("+100*C+"%)"),"scale"===E[1]?i[E[0]]=E[1]+"("+(1-C)+")":"rotateY"!==E[1]&&"rotateX"!==E[1]||Math.abs(T)>.4&&(i[E[0]]=E[1]+"("+(144*C-360)+"deg)",a.display="none"),"end"===t)if(Math.abs(d-C)>=.4){var x=w*Math.abs(d-C);a.transition="all "+x+"ms ease",i.transition="all "+x+"ms ease",s=I,l=L,c=!0,setTimeout((function(){u=null}),x)}else s=k,l=O,u=null}return{firstStyle:a,nextStyle:i,firstInitCls:s,nextInitCls:l,skipToNextPage:c}},t.getGestureDirection=function(e){switch(e){case c.SWIPE_UP:case c.SWIPE_DOWN:return l.VERTICAL;case c.SWIPE_LEFT:case c.SWIPE_RIGHT:return l.HORIZONTAL;default:return""}},t.isNeedSyncAnimation=function(e,t){var n=Math.abs(e.deltaX),o=Math.abs(e.deltaY);return t===l.VERTICAL&&n<o||t===l.HORIZONTAL&&n>o},t.canScrollInMobile=function(e,t){return!(e===c.SWIPE_UP&&"goUp"===t||e===c.SWIPE_DOWN&&"goDown"===t||t===l.HORIZONTAL)},t.moveStart=function(e,n,o,a){var r=e.target,i=e.targetTouches,s=void 0,c={},u="",d=!1;i?(s=e.targetTouches[0],c={move:"touchmove",end:"touchend"}):(s=e,r=window,c={move:"mousemove",end:"mouseup"});var p=s.pageX,f=s.pageY,h={deltaX:0,deltaY:0},g=function(e){var a=s=i?e.targetTouches[0]:e,r=a.pageX,c=a.pageY;h={deltaX:r-p,deltaY:c-f},u||(h.deltaY<0?u="goUp":h.deltaY>0&&(u="goDown"),Math.abs(h.deltaX)>Math.abs(h.deltaY)&&(u=l.HORIZONTAL)),t.canScrollInMobile(n,u)||e.preventDefault(),t.isNeedSyncAnimation(h,t.getGestureDirection(n))&&!t.canScrollInMobile(n,u)&&(d=!0,o(h))};r.addEventListener(c.move,g),r.addEventListener(c.end,(function e(){d&&a(h),r.removeEventListener(c.move,g),r.removeEventListener(c.end,e)}))},t.validatePageExist=function(e,t){return!!o.getFlattenPages(e).find((function(e){return e.source===a.interactionTypes.sketch||e.source===a.interactionTypes.xd?e._id===t||e.clientID===t:e._id===t}))},t.isLarkBrowser=-1!==navigator.userAgent.indexOf("Lark")&&-1===window.location.href.indexOf("lark=true"),t.isLarkApplets=-1!==window.location.href.indexOf("lark=true"),t.isMobileApp=-1!==window.location.href.indexOf("phoneUrl=true"),t.isForcePreview=-1!==window.location.href.indexOf("force=1")},2313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=o.createContext({})},2315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8);n(2351);var r=o.memo((function(e){var t=e.propsRef,n=e.isPageLoadAll;if(!e.dataURL)return null;var r,i=e.view?"&view="+e.view:"",s=e.dataURL;if(e.isPreviewPage&&((r=e.sourceInfo)&&("idoc-for-web"===r.clientName||"idoc-for-axure"===r.clientName&&!r.clientVersion.startsWith("1.0")))){var l=e.dataURL.substr(0,e.dataURL.lastIndexOf("/")),c=e.dataURL.substr(e.dataURL.lastIndexOf("/")+1).replace(".html",""),u=window["__axure_page_rnd__"+e.clientID]+Math.random().toString();window["__axure_page_rnd__"+e.clientID]=u,s=l+"/start.html?fromIDocAppPreview=1&rnd="+u+"#id="+e.clientID+"&p="+c+"&g=1&fn=1&hi=1&c=1"+i}return o.createElement("iframe",{id:"axure-page",className:a.default("axure-page",void 0!==n&&!n&&"page-loading"),src:e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":s,ref:t,loading:"lazy",onLoad:function(){e.onLoad&&e.onLoad(e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":s)},onError:function(){e.onLoad&&e.onLoad(e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":s)},style:{pointerEvents:e.preventEvents?"none":"unset"}})}));t.default=r},2316:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2327),i=n(2361),s=n(2313),l=n(2312),c=n(41),u=n(87),d=n(55),p=n(656);n(2364);var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.parseInteractions=function(){var e=n.props,t=e.interactions,o=e.firstPage,a=[],r=[],i=[];if(o&&t){var s=o.clipArea,l=o.size,u=s.top,d=s.bottom,p=u*l.height,f=d*l.height,h={x:0,y:0,width:l.width,height:p},g={x:0,y:p,width:l.width,height:l.height-p-f},m={x:0,y:l.height-f,width:l.width,height:f};t.forEach((function(e){var t=c.size.transToPixed(e.size,l),n=c.point.transToPixed(e.position,l),o=c.rect.init(n,t);c.rect.contains(h,o)&&a.push(e),c.rect.intersectRect(g,o)&&i.push(Object.assign(Object.assign({},e),{position:Object.assign(Object.assign({},e.position),{y:e.position.y-u})})),c.rect.intersectRect(m,o)&&r.push(Object.assign(Object.assign({},e),{position:Object.assign(Object.assign({},e.position),{y:e.position.y+d-1})}))}))}return{top:a,center:i,bottom:r}},n.renderInteractions=function(e,t){if(!e||0===e.length)return null;var o=n.props,r=o.firstPage,s=o.scale,l=o.options,c=o.isFadeIn,u=o.appType,d=o.onLinkFadeInEnd,p=o.onLinkClick,f=o.nextPage,h=o.onLinkPan,g=o.onLinkPanDone,m=o.panState,v=o.overlayPage,w=n.state.showInteractions;return!l||!e||!r||f&&!m||t||w?null:a.createElement(i.default,{interactions:e,appType:u,scale:s,fadeIn:c,page:r,options:l,onInteractionClick:p,onInteractionPan:h,onInteractionPanDone:g,onFadeInEnd:d,overlayPage:v})},n.state={showInteractions:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillReceiveProps",value:function(){this.setState({showInteractions:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.firstPage,o=t.nextPage,i=t.overlayPage,s=t.appType,c=t.scale,u=t.onAnimationEnd,f=t.options,h=t.overlayAnimation,g=t.panState,m=t.delta,v=t.onTransitionEnd,w=t.type,y=t.shareID;if(!n)return null;if(d.isRpApp(w)){var b="/rp/run/"+y+"/"+n._id+window.location.search;return p.isInIframe()&&(b+="?embeded=1"),a.createElement("iframe",{className:"fragment-rp",src:b})}var P=null==f?void 0:f.mobileType,S=o;i&&(S=i);var E=l.parseAnimate(S,h),k=E.first,O=E.next,I=(S?S.animate:{animation:"",duration:0,noStyle:!1})||{animation:"none",duration:0,noStyle:!1},L=I.animation,T=I.duration,_=I.noStyle,C=("none"===L?1:T||0)+"ms",x=n.size,A=n.landscape,D=x,N=l.builderPageStyle({appType:s,pageSize:D,aniDuration:C,landscape:A,mobileType:P,scale:c}),j=N.width,M=this.parseInteractions();(g&&!i||!h&&_)&&(k="",O="");var R=l.calStyle(o,g,m,j),U=R.firstStyle,z=R.nextStyle,H=R.firstInitCls,W=R.nextInitCls,F=R.skipToNextPage;return a.createElement("div",null,a.createElement(r.default,{style:Object.assign(Object.assign({},N),U),className:["first-page",k,H],key:"first_"+(n&&n._id),page:n,topChildren:this.renderInteractions(M.top,i),centerChildren:this.renderInteractions(M.center,i),bottomChildren:this.renderInteractions(M.bottom,i)}),a.createElement(r.default,{className:["next-page",O,W],key:"next_"+(o&&o._id),style:Object.assign({animationDuration:C,overflow:"hidden",width:j},z),page:o,onAnimationEnd:u,onTransitionEnd:function(){v(F)}}),a.createElement(r.default,{className:["overlay-page",O],key:"overlay_"+(i&&i._id),isOverlay:!!i,style:{animationDuration:C,overflow:"hidden",width:j},page:i,onAnimationEnd:function(t){t.stopPropagation(),e.setState({showInteractions:!1})},topChildren:this.renderInteractions(M.top),centerChildren:this.renderInteractions(M.center),bottomChildren:this.renderInteractions(M.bottom)}))}}]),t}(a.Component);f.defaultProps={isFadeIn:!0,appType:"phone",scale:1,nextPage:null,firstPage:null,overlayPage:null,interactions:[],onLinkClick:null,onLinkFadeInEnd:null,onAnimationEnd:null,overlayAnimation:"",onLinkPan:null,onLinkPanDone:null,panState:"",delta:null,onTransitionEnd:null,options:{alwaysShowLinkArea:!1,mobileType:u.MobileType.iphoneX,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!1}},t.default=function(e){return a.createElement(s.default.Consumer,null,(function(t){var n=t.onAnimationEnd,o=t.onTransitionEnd,r=t.onLinkClick,i=t.onLinkFadeInEnd,s=t.onLinkPan,l=t.onLinkPanDone;return a.createElement(f,Object.assign({},e,{onAnimationEnd:n,onTransitionEnd:o,onLinkClick:r,onLinkFadeInEnd:i,onLinkPan:s,onLinkPanDone:l}))}))}},2317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(87),r=f(n(2328)),i=f(n(2329)),s=f(n(2330)),l=f(n(2331)),c=f(n(2332)),u=f(n(2333)),d=f(n(2334)),p=f(n(2335));function f(e){return e&&e.__esModule?e:{default:e}}var h={},g=function(e){var t=e.width;return{width:e.height,height:t}},m=function(e){var t=e.defaultScreenSize,n=e.shellSize,o=e.screenBounds,a=o.left,r=o.top,i=o.width,s=o.height;return{defaultScreenSize:g(t),shellSize:g(n),screenBounds:{left:r,width:s,height:i,top:n.width-a-i}}};h[a.MobileType.iphoneX]={defaultScreenSize:{width:375,height:812},shellImage:{landscape:i.default,portrait:r.default},shellSize:{width:1295,height:2590},screenBounds:{left:83,top:77,width:1125,height:2436}},h[a.MobileType.iphone]={defaultScreenSize:{width:375,height:667},shellImage:{landscape:l.default,portrait:s.default},shellSize:{width:871,height:1776},screenBounds:{left:61,top:219,width:750,height:1334}},h[a.MobileType.android]={defaultScreenSize:{width:360,height:640},shellImage:{landscape:u.default,portrait:c.default},shellSize:{width:1204,height:2458},screenBounds:{left:62,top:252,width:1080,height:1920}},h[a.MobileType.pad]={defaultScreenSize:{width:768,height:1024},shellImage:{landscape:p.default,portrait:d.default},shellSize:{width:1762,height:2496},screenBounds:{left:112,top:225,width:1537,height:2049}},t.default={getShellInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=h[e];if(n){var a=o({},h[e]);if(a){var r=a,i=r.shellImage;t&&(a=m(a));var s=a,l=s.defaultScreenSize,c=s.shellSize,u=s.screenBounds;return{defaultScreenSize:l,shellSize:c,screenBounds:u,shellImage:t?i.landscape:i.portrait}}}return null}}},2321:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2365),i=n(43);n(2366);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getParentIDs=function(e,t,o){if(!(null==e?void 0:e.parentID))return o;var a=i.findNode(t,e.parentID);return o.push(e.parentID),n.getParentIDs(a,t,o)},n.doExpandNode=function(e,t){if(!e||0===e.length)return null;var o=e.filter((function(e){return!n.props.searchKey||i.isNodeOrChildrenMatch(e,n.props.searchKey)}));return 0===o.length?null:o.map((function(e){var o=Object.assign(Object.assign({},e),{expand:!0});return(o=t&&t.length?Object.assign(Object.assign({},e),{expand:t.includes(e._id)||(null==e?void 0:e.expand)}):Object.assign(Object.assign({},e),{expand:null==e?void 0:e.expand})).children&&o.children.length&&(o.children=n.doExpandNode(o.children)),o}))},n.initTreeExpand=function(){var e=i.findNode(n.props.data,n.props.selectedID),t=n.getParentIDs(e,n.props.data,[]),o=n.doExpandNode(n.props.data,t);n.setState({data:o,needExpandIDArr:t})},n.handleNodeExpandChange=function(e){if(n.props.canExpand){var t=e;t.expand=!t.expand;var o=n.state.data,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o));n.setState({data:a})}},n.handleNodeSelected=function(e){if(e._id&&!e.isGroup){var t=n.props.onPageSelected;t&&t(e._id)}},n.renderLinks=function(){var e=n.props.links;return e?a.createElement("div",{className:"links-container"},e.map((function(e){return a.createElement("div",{className:"tree-node"},a.createElement("div",{className:"tree-node-title link",onClick:function(t){t.stopPropagation(),n.handleNodeSelected(e)}},a.createElement("span",null,e.name)))}))):null},n.state={data:[],needExpandIDArr:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.initTreeExpand()}},{key:"componentDidUpdate",value:function(e){if(e.data.length!==this.props.data.length||e.searchKey!==this.props.searchKey){var t=this.doExpandNode(this.props.data);this.setState({data:t})}if(e.selectedID!==this.props.selectedID){var n=i.findNode(this.props.data,this.props.selectedID),o=this.getParentIDs(n,this.props.data,[]),a=this.doExpandNode(this.state.data,o);this.setState({data:a,needExpandIDArr:o})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,o=t.cls,i=t.downArrowShow,s=t.treeRef,l=this.state.data;return a.createElement("div",{className:"preview-tree-wrap "+o,ref:s},this.renderLinks(),l&&l.map((function(t){return a.createElement(r.default,{key:t._id,page:t,downArrowShow:i,selID:n,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})})))}}]),t}(a.Component);s.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=s},2322:function(e,t,n){},2323:function(e,t,n){e.exports=n.p+"assets/default-img.265ce72e45b558b6c865fd3dcce678f6.png"},2325:function(e,t,n){e.exports=n.p+"assets/no_search_result.111d843603d33e4a2781273c878d914e.png"},2326:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(98),i=n(8),s=n(2316),l=n(2321),c=n(2367),u=n(49),d=n(167),p=n(55),f=n(2312),h=n(18),g=n(2315),m=n(2370),v=n(2371),w=n(657);n(2372);var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleWindowTouchStart=function(){(0,n.props.onLinkAreaFadeInStart)()},n.handleToggleTree=function(){var e=n.state.showTree;n.setState({showTree:!e})},n.handleBallTouchStart=function(e){e.stopPropagation();var t=e.target,o=n.state.ballPoint,a=e.nativeEvent.targetTouches[0],r=a.pageX,i=a.pageY;n.setState({active:!0});var s=function(e){e.stopPropagation(),e.preventDefault();var t=e.targetTouches[0],a=t.pageX,s=t.pageY,l=a-r,c=s-i,u={right:o.right-l,bottom:o.bottom-c};n.setState({ballPoint:u})};t.addEventListener("touchmove",s),t.addEventListener("touchend",(function e(){var o=n.state.ballPoint,a=window.innerWidth-70,r=window.innerHeight-70,i=o.right>0,l=Object.assign({},o);o.right<=17.5&&(l.right=-35),o.right>a&&(l.right=a),o.bottom<0&&(l.bottom=0),o.bottom>r&&(l.bottom=r),n.setState({active:i,ballPoint:l}),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",e)}))},n.state={showTree:!1,ballPoint:{right:-35,bottom:70},active:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.handleWindowTouchStart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.handleWindowTouchStart)}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.loaded,o=e.app,s=e.onPageSelected,d=e.needPerspective,g=e.onMobileToggleTree,y=e.onMobileTouchStart,b=e.onMobileTouchMove,P=e.onMobileTouchEnd,S=e.showPhoneTree,E=this.state,k=E.active,O=E.ballPoint,I=E.showTree,L=n?o.children:null;if(!n)return a.createElement(w.default,null);if(!f.isMobileApp&&!f.isLarkBrowser){if(h.isiOS&&h.isWeChat&&!f.isForcePreview)return a.createElement(m.default,{name:o.name,icon:o.icon,shareID:o.shareID});if(h.isiOS&&h.isSafari&&!f.isForcePreview&&!h.isSafariStandalone)return a.createElement(v.default,{name:o.name,icon:o.icon,shareID:o.shareID})}return a.createElement("div",{className:i.default("mobile-container",{perspective:d,childIsIframe:p.isSpecialApp(o.type)}),onTouchStart:y,onTouchMove:b,onTouchEnd:P},this.renderPageContent(),f.isMobileApp||f.isLarkBrowser?a.createElement("div",{className:i.default("tree-panel",{show:S,hide:!S}),onClick:g},L&&a.createElement(c.default,{data:L,homePageId:o.homepage,groupCount:o.groupCount,pageCount:o.pageCount,name:o.name,selectedID:t?t._id:null,onPageSelected:s})):a.createElement("div",{className:i.default("tree-panel",{show:I,hide:!I}),onClick:this.handleToggleTree},L&&a.createElement(l.default,{data:L,selectedID:t?t._id:null,onPageSelected:s})),!f.isMobileApp&&!f.isLarkBrowser&&r.createPortal(a.createElement("div",{style:O,className:i.default("controller-ball",{active:k}),onClick:this.handleToggleTree,onTouchStart:this.handleBallTouchStart},a.createElement(u.Icon,{cls:"demo_control",size:"3.6rem"})),document.body))}},{key:"renderPageContent",value:function(){var e=this.props,t=e.interactions,n=e.currentPage,o=e.nextPage,r=e.linkFadeIn,i=e.overlayPage,l=e.overlayAnimation,c=e.preview,u=e.app;return n?p.isAxureApp(u.type)?a.createElement(g.default,{isPreviewPage:!0,clientID:n.clientID,sourceInfo:n.sourceInfo,dataURL:n.dataURL,preventEvents:!1,adjustBodyPosition:!1}):a.createElement(s.default,{appType:d.AppType.phone,interactions:t,firstPage:n,nextPage:o,overlayPage:i,isFadeIn:r,panState:c.panState,delta:c.delta,overlayAnimation:l,type:u.type,shareID:u.shareID}):null}}]),t}(a.Component);y.defaultProps={app:null,interactions:null,currentPage:null,nextPage:null,overlayPage:null,loaded:!1,linkFadeIn:!0,onLinkAreaFadeInStart:null,onPageSelected:null,needPerspective:!1,overlayAnimation:"",preview:null},t.default=y},2327:function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(49),s=n(653),l=n(2313),c=n(2312),u=n(2336);n(2360);var d=n(88),p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pageDiv=r.createRef(),n.onMoveStart=function(e){var t=n.props,o=t.page,a=t.onPagePan,r=t.onPagePanDone,i=t.isOverlay,s=o.onLoaded.gesture,l=!s||-1===s.indexOf("swipe")||i||-1!==e.target.className.indexOf("link-hot");c.moveStart(e,s,(function(e){l||a(e)}),(function(e){l||r(e)}))},n.setTimming=function(e){n.isTiming=e},n.handlePageGesture=function(e,t,o){e&&!n.isTiming?(n.setTimming(!0),setTimeout((function(){n.setTimming(!1),o(t.type)}),e)):n.isTiming||o(t.type)},n.isTiming=!1,n.handleOnScroll=n.handleOnScroll.bind(n),n.state={scrollLeft:0,scrollTop:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;if(this.pageDiv.current){var t=new Hammer(this.pageDiv.current),n=this.props,o=n.onPageGesture,a=n.page,r=n.isOverlay,i=n.pageWhetherExist,l=a.onLoaded,u=l.delay,d=l.target,p=l.gesture;if(i(d)&&(t.get("swipe").set({velocity:.1}),p)){if("doubleClick"===p)return void t.on("tap",(function(t){-1===t.target.className.indexOf("link-hot")&&2===t.tapCount&&e.handlePageGesture(u,t,o)}));var f=p;p.indexOf("swipe")>-1&&(c.getGestureDirection(p)===s.VERTICAL&&t.get("swipe").set({direction:Hammer.DIRECTION_ALL}),r||(p="pan")),t.on(""+p,(function(t){-1===t.target.className.indexOf("link-hot")&&f===p&&e.handlePageGesture(u,t,o)}))}}}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;!this.scrollNode||e.page&&t._id===e.page._id||(this.scrollNode.scrollTop(0),this.scrollNode.scrollLeft(0))}},{key:"handleOnScroll",value:function(){this.scrollNode&&this.setState({scrollTop:this.scrollNode.getScrollTop(),scrollLeft:this.scrollNode.getScrollLeft()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,a=t.className,s=t.onAnimationEnd,l=t.topChildren,c=t.bottomChildren,p=t.centerChildren,f=t.onTransitionEnd;if(n){var h=this.props.style||{},g=["preview-page"];if(a)if(Array.isArray(a))g=g.concat(a);else if("string"==typeof a)g.push(a);else if("object"===(void 0===a?"undefined":o(a))){Object.keys(a).forEach((function(e){g.push(a[e])}))}var m=h.width,v=n.clipArea,w=n.size,y=(v?v.top:0)*w.height,b=(v?v.bottom:0)*w.height,P=w.height-y-b,S=m?m/w.width:1,E=Math.round(y*S),k=Math.round(b*S),O=Math.round(P*S),I=this.centerDiv?this.centerDiv.getBoundingClientRect().height:0;return r.createElement("div",{onAnimationEnd:s,onTransitionEnd:f,style:Object.assign({},h),onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart,className:g.join(" "),ref:this.pageDiv},E>0&&r.createElement("div",{className:"page-fragment top-fragment",style:{width:m,height:E}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:E,containerWidth:m,scrollLeft:0,scrollTop:0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:0,right:m,bottom:E}},l)),r.createElement("div",{ref:function(t){e.centerDiv=t},className:"page-fragment center-fragment",style:{flex:1}},r.createElement(i.ScrollView,{setRef:function(t){e.scrollNode=t},onScroll:this.handleOnScroll},r.createElement("div",{className:"center-content",style:{width:Math.round(m),height:O}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:O,containerWidth:m,scrollLeft:0,scrollTop:0,style:{top:-E},mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:E+this.state.scrollTop,right:m,bottom:E+this.state.scrollTop+I},isPreviewPage:!0},p)))),k>0&&r.createElement("div",{className:"page-fragment bottom-fragment",style:{width:m,height:k}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:k,containerWidth:m,scrollLeft:0,scrollTop:0,isPreviewPage:!0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:E+O,right:m,bottom:E+O+k}},c)))}return null}}]),t}(r.Component);p.defaultProps={page:null,className:null,style:null,onAnimationEnd:null,topChildren:null,bottomChildren:null,centerChildren:null,onPageGesture:null,onTransitionEnd:null,onPagePan:null,onPagePanDone:null,isOverlay:!1,pageWhetherExist:null},t.default=function(e){return r.createElement(l.default.Consumer,null,(function(t){var n=t.onPagePan,o=t.onPagePanDone,a=t.onPageGesture,i=t.pageWhetherExist;return r.createElement(p,Object.assign({},e,{onPagePan:n,onPagePanDone:o,onPageGesture:a,pageWhetherExist:i}))}))}},2328:function(e,t,n){e.exports=n.p+"assets/portrait.6514b444ebe12079ec3dd87d2efee053.svg"},2329:function(e,t,n){e.exports=n.p+"assets/landscape.c8cf046c8e2b3b0410b47f231d0f360e.svg"},2330:function(e,t,n){e.exports=n.p+"assets/portrait.59106740603c792b974222a6cd620281.svg"},2331:function(e,t,n){e.exports=n.p+"assets/landscape.1a2b24c1b41eeab9ed45c4947b226efe.svg"},2332:function(e,t,n){e.exports=n.p+"assets/portrait.8215e32006c73f788deccc6f7a4134c0.svg"},2333:function(e,t,n){e.exports=n.p+"assets/landscape.50f07a476ff9a0e497e9f21ce058e956.svg"},2334:function(e,t,n){e.exports=n.p+"assets/portrait.1a9c2072c2297def494faaf12745a26a.svg"},2335:function(e,t,n){e.exports=n.p+"assets/landscape.2e29853204bdea1d486c9d23dc8fd323.svg"},2336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2337),r=n(2315),i=n(2352),s=n(2354);n(2359);var l=/http\:\/\/mockplus-static\.oss-cn-hangzhou\.aliyuncs\.com\//gi,c=function(e){var t=e.page,n=e.zoom,c=e.children,u=e.containerHeight,d=e.containerWidth,p=e.scrollTop,f=e.scrollLeft,h=(e.saveCanvasParts,e.isPreviewPage),g=e.style,m=e.scale,v=e.mode,w=e.isPageLoadAll,y={width:Math.round(t.size.width*n),height:Math.round(t.size.height*n)};if("axure"===t.type)return o.createElement("div",{className:"common-page",style:y},o.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},o.createElement(r.default,{isPreviewPage:h,clientID:t.clientID,sourceInfo:t.sourceInfo,dataURL:t.dataURL,preventEvents:!0,adjustBodyPosition:!0,onLoad:e.onLoaded,isPageLoadAll:w})),c);if("mockplus"===t.type)return o.createElement("div",{className:"common-mk-page",style:y},o.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},o.createElement(s.default,{ID:t._id,page:t,scale:e.zoom,isInApp:e.isInApp,onLoad:e.onLoaded,isPageLoadAll:w})),c);if("rp"===t.type){var b=t.imageCreatedAt,P=t.imageURL,S=t.updatedAt;if(!P||!b||!S||new Date(S).getFullYear()<2e3||new Date(b).getTime()<=new Date(S).getTime()+3e4)return o.createElement("div",{className:"common-page",style:y},o.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},o.createElement(i.default,{dataURL:t.dataURL,preventEvents:!0,onLoad:e.onLoaded,isPageLoadAll:w})),c)}return o.createElement(o.Fragment,null,o.createElement("div",{className:"common-page",style:Object.assign({},y,g)},o.createElement(a.default,{imageURL:t.imageURL.replace(l,"https://img02.mockplus.cn/"),containerHeight:u,containerWidth:d,scrollLeft:f,scrollTop:p,zoom:n,scale:m,isCutted:t.isCutted,parts:t.parts,size:t.size,page:t,mode:v,viewPortRect:e.viewPortRect,viewSize:y,onImageLoaded:e.onLoaded,isPageLoadAll:w}),!h&&c),h&&c)};c.defaultProps={isInApp:!0,isPreviewPage:!1,style:{}},t.default=c},2337:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2314),i=n(2346),s=n(2347),l=n(654),c=n(28),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.zoom;return n.state={isShowHugePage:l.ifShowHugePage(o),imageLoaded:!1},n.debounceGetShow=r(n.getShowHugepage,500),n.onImageLoaded=n.onImageLoaded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.zoom;t!==e.zoom&&this.debounceGetShow(t)}},{key:"getShowHugepage",value:function(e){this.setState({isShowHugePage:l.ifShowHugePage(e)})}},{key:"onImageLoaded",value:function(e){this.setState({imageLoaded:e});var t=this.props,n=t.onImageLoaded,o=t.imageURL;n&&n(o)}},{key:"render",value:function(){var e=this.props,t=e.isCutted,n=e.imageURL,o=e.zoom,r=e.size,l=e.scale,u=e.page,d=e.mode,p=e.viewSize,f=e.viewPortRect,h=e.isPageLoadAll,g=this.state,m=g.isShowHugePage,v=g.imageLoaded,w=!c.loadOriginImageMode(d);if(t&&u.parts&&u.parts.length>0){var y=m||!m&&!v;return a.createElement("div",null,a.createElement("div",{style:{display:y?"block":"none"}},a.createElement(s.default,{page:u,zoom:o,scale:l,mode:d,viewPortRect:f,isPageLoadAll:h})),a.createElement("div",{style:{display:y?"none":"block"}},a.createElement(i.default,{key:n,imageURL:n,zoom:o,viewSize:p,isBigImg:r.width>1e4||r.height>1e4,canLoadThumb:w,onImageLoaded:this.onImageLoaded,isPageLoadAll:h})))}return a.createElement(i.default,{key:n,imageURL:n,zoom:o,viewSize:p,isBigImg:r.width>1e4||r.height>1e4,canLoadThumb:w,onImageLoaded:this.onImageLoaded,isPageLoadAll:h})}}]),t}(a.Component);u.defaultProps={isCutted:!1},t.default=u},2346:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(8),i=n(119),s=n(37),l=n(2314),c=function(e,t,n){return n?i.getStyledImage(e,"!thumb-p-25"):u(e,t)},u=function(e,t){if(s.getDevicePixelRatio()>1){if(t<.25)return i.getStyledImage(e,"!thumb-p-50")}else{if(t<.25)return i.getStyledImage(e,"!thumb-p-25");if(t<.5)return i.getStyledImage(e,"!thumb-p-50")}return e},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTargetImageLoaded=function(){n.setState({showTargetImage:!0}),n.props.onImageLoaded(!0)},e.canLoadThumb?n.state={showTargetImage:!1,targetImageURL:c(e.imageURL,e.zoom,e.isBigImg)}:n.state={showTargetImage:!0,targetImageURL:e.imageURL},n.debouncedLoadNewImage=l(n.loadNewImage,500),n.onTargetImageLoaded=n.onTargetImageLoaded.bind(n),n.renderSVG=n.renderSVG.bind(n),n.renderImage=n.renderImage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e,t){e.imageURL!==this.props.imageURL?this.loadNewImage():this.debouncedLoadNewImage()}},{key:"loadNewImage",value:function(){var e=this.props,t=e.imageURL,n=e.zoom,o=e.canLoadThumb,a=e.isBigImg,r=e.onImageLoaded,i=o?c(t,n,a):t;i!==this.state.targetImageURL&&(this.setState({targetImageURL:i,showTargetImage:!1}),r(!1))}},{key:"renderSVG",value:function(){var e=this.props.imageURL;return a.createElement("div",{className:"sgv-content",style:{backgroundImage:"url("+e+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",width:"100%",height:"100%",position:"absolute"}})}},{key:"renderImage",value:function(){var e=this.props,t=e.imageURL,n=e.isBigImg,o=e.isPageLoadAll,s=this.state,l=s.targetImageURL,c=s.showTargetImage,u=i.getStyledImage(t,"!thumb-p-25");return n?a.createElement("img",{className:r.default("common-img",void 0!==o&&!o&&"page-loading"),src:l,style:Object.assign({},this.props.viewSize,{display:void 0===o||o?c?"block":"none":"block"}),onLoad:this.onTargetImageLoaded,onError:this.onTargetImageLoaded}):a.createElement("div",null,a.createElement("img",{className:r.default("common-img",void 0!==o&&!o&&"page-loading"),src:u,style:Object.assign({},this.props.viewSize,{display:(void 0===o||o)&&c?"none":"block"})}),a.createElement("img",{className:r.default("common-img",void 0!==o&&!o&&"page-loading"),src:l,style:Object.assign({},this.props.viewSize,{display:void 0===o||o?c?"block":"none":"block"}),onLoad:this.onTargetImageLoaded,onError:this.onTargetImageLoaded}))}},{key:"render",value:function(){return-1!==this.props.imageURL.indexOf(".svg")&&s.isIE?this.renderSVG():this.renderImage()}}]),t}(a.PureComponent);t.default=d},2347:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(8),i=n(2314),s=n(654),l=n(119);n(2348);var c=n(2349),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.page,a=e.scale,r=e.mode,l=e.viewPortRect;return n.state={imgShowList:o.parts.map((function(){return{thumbShow:!0}})),showParts:s.getBigPageParts(l,o,a,r)},n.debounceGetShowParts=i(n.getShowParts,500),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.loadNewImg()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.page,o=t.scale,a=t.viewPortRect;if(n._id!==e.page._id&&this.loadNewImg(),a&&e.viewPortRect){var r=e.viewPortRect,i=r.top,s=r.right,l=r.bottom,c=r.left;o===e.scale&&a.top===i&&a.right===s&&a.bottom===l&&a.left===c||this.debounceGetShowParts()}}},{key:"getShowParts",value:function(){var e=this.props,t=e.page,n=e.scale,o=e.mode,a=e.viewPortRect;this.setState({showParts:s.getBigPageParts(a,t,n,o)})}},{key:"loadNewImg",value:function(){var e=this.props.page;this.setState({imgShowList:e.parts.map((function(){return{thumbShow:!0}}))})}},{key:"onTargetImageLoaded",value:function(e){var t=this.state.imgShowList;this.setState({imgShowList:t.map((function(t,n){return e===n?{thumbShow:!1}:t}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,o=t.zoom,i=t.viewPortRect,s=t.isPageLoadAll,u=this.state,d=u.imgShowList,p=u.showParts;return i&&n&&n.parts?a.createElement("div",{className:r.default("c-huge-page")},p.map((function(t,n){return t.show?a.createElement(a.Fragment,{key:t.imageURL+"-fragment"},d[n]&&d[n].thumbShow&&a.createElement(c.default,{key:t.imageURL+"-thumb",src:l.getStyledImage(t.imageURL,"!thumb-p-25"),isPageLoadAll:s,style:{position:"absolute",left:t.position.x*o,top:t.position.y*o,width:t.size.width*o,height:t.size.height*o}}),a.createElement("img",{key:t.imageURL+"-target",src:t.imageURL,loading:"lazy",className:r.default("common-img",void 0!==s&&!s&&"page-loading"),width:t.size.width*o,height:t.size.height*o,style:{position:"absolute",left:t.position.x*o,top:t.position.y*o,width:t.size.width*o,height:t.size.height*o,display:(void 0===s||s)&&d[n]&&d[n].thumbShow?"none":"block"},onLoad:function(t){e.onTargetImageLoaded(n)},onError:function(t){e.onTargetImageLoaded(n)}})):null}))):null}}]),t}(a.Component);t.default=u},2348:function(e,t,n){},2349:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(2350);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaded:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.style,r=t.isPageLoadAll;return this.state.loaded?a.createElement("img",{className:""+(void 0!==r&&!r&&"page-loading"),src:n,loading:"lazy",width:null==o?void 0:o.width,height:null==o?void 0:o.height,style:o||null,onLoad:function(){e.setState({loaded:!0})}}):a.createElement("div",{className:"lazy-image-content"})}}]),t}(a.Component);t.default=r},2350:function(e,t,n){},2351:function(e,t,n){},2352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8);n(2353);var r=o.memo((function(e){if(!e.dataURL)return null;var t=e.isPageLoadAll;return o.createElement("iframe",{className:a.default("rp-page",void 0!==t&&!t&&"page-loading"),src:e.dataURL,loading:"lazy",style:{pointerEvents:e.preventEvents?"none":"unset"},onLoad:function(){e.onLoad&&e.onLoad(e.dataURL)},onError:function(){e.onLoad&&e.onLoad(e.dataURL)}})}));t.default=r},2353:function(e,t,n){},2354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(663)({loader:function(){return Promise.resolve().then((function(){return n(2355)}))},loading:n(657).default});t.default=function(e){return o.createElement(a,Object.assign({},e))}},2355:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(2356);var r=n(2357),i=n(661),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.self=a.createRef(),n.doCheckInView=function(){if(n.self.current){var e=window,t=e.innerHeight,o=e.innerWidth,a=n.self.current.getBoundingClientRect(),r=a.left,i=a.top,s=a.right,l=a.bottom,c=a.width,u=a.height,d=!(r>o||s<0||i>t||l<0||0===c||0===u);d!==n.state.inView&&n.setState({inView:d})}},n.doReconstruction=function(e){if(e){var t=e.ID,o=e.name,a=e.controls,r={ID:t,name:o,size:e.size,loaded:!0,controls:[]};r.controls=function e(t){return t.map((function(t){var n={data:t,dynamicProperties:{}};return t.children&&(n.isGroup=!0,n.children=e(t.children)),n}))}(a),r.param=e.param,n.setState({pageData:r})}else n.setState({pageData:void 0})},n.doLoadPage=function(e){var t=e.clientID||e.offlineDemoNodeID;e.loaded||i.TaskManager.taskManager.push((function(o){i.default.loadPageData(t,e.dataURL,(function(e,a){a?i.default.parsePage(t,a,(function(e){e.error||n.doReconstruction(e.content),o()})):o()}))}))},n.renderComponent=function(e){var t=void 0,o=e.data;return e.isGroup&&(t=e.children),a.createElement(r.default,{key:o.controlID,data:e},t&&t.map((function(e){return n.renderComponent(e)})))},n.state={inView:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props.onLoad;e&&e(),this.props.isInApp&&this.doLoadPage(this.props.page)}},{key:"componentDidUpdate",value:function(e){this.props.isInApp&&this.props.page.dataURL!==e.page.dataURL&&this.doLoadPage(this.props.page)}},{key:"componentWillReceiveProps",value:function(e){this.props.page.dataURL!==e.page.dataURL||this.props.page.pageData!==e.page.pageData||e.page.pageData&&!this.state.pageData?this.doReconstruction(e.page.pageData):this.state.pageData||e.page.loaded||this.doLoadPage(e.page)}},{key:"renderPage",value:function(){var e=this,t=this.state.pageData;if(!t)return null;var n="white";return t.param&&(n=t.param.backgroundColor),a.createElement("div",{key:t.ID,style:{width:t.size.w,height:t.size.h,background:n}},a.createElement("div",null,t&&t.controls.map((function(t){return e.renderComponent(t)}))))}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,o=e.isPageLoadAll,r=Object.assign({},t);return a.createElement("div",{ref:this.self,id:this.props.ID,style:r,className:"prototype-page "+(n||"")+" "+(void 0!==o&&!o&&"page-loading")},this.renderPage())}}]),t}(a.Component);s.defaultProps={isInApp:!0},t.default=s},2356:function(e,t,n){},2357:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(2358);var r=n(6),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.selfRef=a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.data.data!==e.data.data}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.children,o=t.data,i=o.controlTypeID,s=o.controlID;if(!r.default.PropertiesHelper.getFullProperties(t).isShow)return null;var l=r.default.ComponentFactory.createComponent(i),c=r.default.StyleHelper.init(t).bounds().opacity().style,u=r.default.ComponentFactory.getComponentClassName(i);return a.createElement("div",{id:t.data.controlID,datatype:t.data.controlTypeID,style:c,className:"prototype-component"},l&&a.createElement(l,Object.assign({key:s},t,{className:u}),n))}}]),t}(a.Component);i.defaultProps={},t.default=i},2358:function(e,t,n){},2359:function(e,t,n){},2360:function(e,t,n){},2361:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(8),i=n(2362),s=n(2312),l=n(87),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.interactions,n=e.options,o=e.appType,c=e.page,u=e.fadeIn,d=e.scale,p=e.onFadeInEnd,f=e.onInteractionClick,h=e.onInteractionPan,g=e.onInteractionPanDone,m=e.overlayPage,v=c.landscape,w=c.size,y=n.mobileType,b=n.alwaysShowLinkArea,P=n.showLinkAreaWhenHovered;return a.createElement(a.Fragment,null,t.map((function(e){if(e.type===l.externalLink&&!e.target)return null;var t=e.size,n=e.position,c=s.calculateInteractionSize({appType:o,mobileType:y,landscape:v,position:n,size:t,pageSize:w,scale:d}),S=r.default("link-hot",{hovered:!b&&P,hidden:!b&&!u,normal:"web"===o,"link-hot-fade":!b&&u});return a.createElement(i.default,{key:e._id,style:c,interaction:e,clz:S,onAnimationEnd:p,onClick:f,onPan:h,onPanDone:g,overlayPage:m})})))}}]),t}(a.Component);c.defaultProps={fadeIn:!1,scale:1,options:{alwaysShowLinkArea:!0,showLinkAreaWhenHovered:!0,mobileType:l.MobileType.iphoneX},overlayPage:null},t.default=c},2362:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2363),i=n(655),s=n(653),l=n(2312),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.interactionDiv=a.createRef(),n.onMoveStart=function(e){e.preventDefault();var t=n.props,o=t.interaction,a=t.onPan,r=t.onPanDone,i=t.overlayPage,s=o.gesture||"tap";!s||-1===s.indexOf("swipe")||i||l.moveStart(e,s,(function(e){a(e,o)}),(function(e){r(e,o)}))},n.setTiming=function(e){n.isTiming=e},n.handleOnClick=function(e,t,o,a){e&&!n.isTiming?(n.setTiming(!0),setTimeout((function(){n.setTiming(!1),a(t,o)}),e)):n.isTiming||a(t,o)},n.isTiming=!1,n.state={touchAction:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.interaction,o=t.onClick,a=t.overlayPage,i=new r(this.interactionDiv.current),c=n.gesture||"tap";"swipeup"===c?this.setState({touchAction:"pan-up"}):"swipedown"===c?this.setState({touchAction:"pan-down"}):this.setState({touchAction:"auto"});var u=n.delay||0;if(i.get("swipe").set({velocity:.1}),i.set({domEvents:!0}),"doubleClick"===c)i.on("tap",(function(t){2===t.tapCount&&e.handleOnClick(u,t,n,o)}));else if("hover"===c)this.interactionDiv.current.addEventListener("mouseenter",(function(t){e.handleOnClick(u,t,n,o)}),!1);else{var d=c;c.indexOf("swipe")>-1&&(l.getGestureDirection(c)===s.VERTICAL&&i.get("swipe").set({direction:r.DIRECTION_ALL}),a||(c="pan")),i.on(""+c,(function(t){d===c&&e.handleOnClick(u,t,n,o)}))}}},{key:"componentWillUnmount",value:function(){this.interactionDiv.current.removeEventListener("mouseenter",this.handleOnClick.bind(this))}},{key:"render",value:function(){var e=this.props,t=e.clz,n=e.onAnimationEnd,o=e.interaction,r=this.props.style,s=o.gesture||"tap",l=r.width<32||r.height<32?{display:"none"}:null,c=i.AllTriggerType[s],u=r.width>=32&&r.height>=32&&c&&c.icon;return this.state.touchAction&&(r=Object.assign(Object.assign({},r),{touchAction:this.state.touchAction})),a.createElement(a.Fragment,null,a.createElement("div",{style:r,className:t,"data-type":"interaction",onAnimationEnd:n,ref:this.interactionDiv,onClick:function(e){e.stopPropagation()},onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart},u&&a.createElement("img",{src:c.icon,style:l,alt:s})))}}]),t}(a.Component);t.default=c},2364:function(e,t,n){},2365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8),r=n(49),i=function e(t){var n=t.page,i=t.selID,s=t.onExpand,l=t.onSelected,c=t.offset,u=void 0===c?0:c,d=t.downArrowShow,p=n.children,f=n.name,h=n.expand,g=n._id,m=n.color,v=n.icon,w=n.isGroup,y=n.isHomepage,b=n.landscape,P=!(w||p&&0!==p.length);return o.createElement("div",{key:g,className:"tree-node",style:{position:"relative",right:0}},o.createElement("div",{className:a.default("tree-node-title",{selected:g===i}),ref:function(e){g===i&&e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()},onClick:function(e){e.stopPropagation(),P?l(n):(w&&s(n),!w&&l(n))},style:{paddingLeft:u}},o.createElement("span",null,P?o.createElement("span",{className:"no-icon"}):o.createElement(r.Icon,{cls:h?"tag_downarrow":"tag_rightarrow",solid:!0,onClick:function(e){e.stopPropagation(),s(n)}})),y&&o.createElement(r.Icon,{cls:"demo_home"}),b&&o.createElement(r.Icon,{cls:"tree_phone"}),w&&o.createElement(r.Icon,{cls:"tree_group",color:"#969798"}),!w&&v&&o.createElement(r.Icon,{cls:v,color:m}),!w&&!v&&m&&o.createElement("div",{className:"default-icon",style:{background:m}}),o.createElement("span",{className:a.default("tree-node-title-name",{"click-able":!w}),title:f},f)),h&&p&&o.createElement("div",{className:a.default("tree-node-content",{expand:h})},p&&p.map((function(t){return o.createElement(e,{key:t._id,page:t,selID:i,onExpand:s,onSelected:l,offset:u+16,downArrowShow:d})}))))};i.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=i},2366:function(e,t,n){},2367:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=f(r),s=f(n(5)),l=n(49),c=n(18),u=f(n(2368)),d=n(2312),p=f(n(7));function f(e){return e&&e.__esModule?e:{default:e}}n(2369);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.call(n);var o=n.doExpandAllNode(e.data);return n.state={data:o},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,o=t.cls,a=t.downArrowShow,r=t.links,s=t.homePageId,l=t.groupCount,f=t.pageCount,h=t.name,g=this.state.data;var m,v,w,y,b=(m=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,v=window.devicePixelRatio||1,w=window.screen.width*v,y=window.screen.height*v,!!(m&&1125===w&&2436===y||m&&828===w&&1792===y||m&&1242===w&&2688===y));return i.default.createElement("div",{className:"phone-preview-tree "+o,style:{paddingTop:b?"120px":"80px",paddingBottom:d.isLarkApplets&&!c.isZh?"0px":"92px"}},i.default.createElement("div",{className:"tree-head",style:{top:b?"30px":"0px"}},i.default.createElement("div",{className:"tree-head-wrap"},i.default.createElement("div",{className:"logo"},i.default.createElement("div",{className:"icon idoc_iconfont icon-_logo"})),i.default.createElement("div",{className:"text"},i.default.createElement("span",null,h),i.default.createElement("p",null,(0,p.default)("appManager.countLabel",l,f))))),i.default.createElement("div",{className:"tree-wrap"},this.renderLinks(r),g&&g.map((function(t){return i.default.createElement(u.default,{key:t._id,page:t,homePageId:s,downArrowShow:a,selID:n,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})}))),this.renderExit())}}]),t}(r.Component),g=function(){var e=this;this.doExpandAllNode=function(t){return t.map((function(t){var n=o({},t,{expand:!0});return n.children&&n.children.length&&(n.children=e.doExpandAllNode(n.children)),n}))},this.handleNodeExpandChange=function(t){if(e.props.canExpand){var n=t;n.expand=!n.expand;var o=e.state.data,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o));e.setState({data:a})}},this.handleNodeSelected=function(t){if(t._id&&!t.isGroup){var n=e.props.onPageSelected;n&&n(t._id)}},this.renderLinks=function(){var t=e.props.links;return t?i.default.createElement("div",{className:"links-container"},t.map((function(t){return i.default.createElement("div",{className:"tree-node"},i.default.createElement("div",{className:"tree-node-title link",onClick:function(n){n.stopPropagation(),e.handleNodeSelected(t)}},i.default.createElement("span",null,t.name)))}))):null},this.exitPreview=function(){d.isLarkApplets?tt&&tt.miniProgram&&tt.miniProgram.navigateBack&&tt.miniProgram.navigateBack():d.isLarkBrowser?window.h5sdk&&window.h5sdk.ready((function(){window.h5sdk.biz.navigation.close({})})):window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("exit")},this.shareApp=function(){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("share")},this.renderExit=function(){return c.isiOS&&!d.isLarkApplets&&c.isZh?i.default.createElement("div",{className:"tree-exit-preview-ios"},i.default.createElement(l.Icon,{cls:"icon_right",size:22}),i.default.createElement("div",{className:"text"},(0,p.default)("preview.iosExitText"))):d.isLarkApplets&&c.isZh||!d.isLarkApplets&&(!c.isiOS||!c.isZh)?i.default.createElement("div",{className:"tree-exit-preview"},i.default.createElement("div",{className:"tree-exit",style:{border:"none"}},i.default.createElement(l.Button,{width:"100%",onClick:e.exitPreview},(0,p.default)("preview.exit")))):void 0}};h.propTypes={data:s.default.arrayOf(s.default.shape({})).isRequired,selectedID:s.default.string,onPageSelected:s.default.func,canExpand:s.default.bool,cls:s.default.string,downArrowShow:s.default.bool},h.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=h},2368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(0)),a=s(n(5)),r=s(n(8)),i=n(49);function s(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var n=t.page,a=t.selID,s=t.onExpand,l=t.onSelected,c=t.offset,u=void 0===c?0:c,d=t.downArrowShow,p=t.homePageId,f=n.children,h=n.name,g=n.expand,m=n._id,v=n.color,w=n.icon,y=n.isGroup,b=!(y||f&&0!==f.length),P=n._id===p;return o.default.createElement("div",{key:m,className:"tree-node",style:{position:"relative",right:0}},o.default.createElement("div",{className:(0,r.default)("tree-node-title",{selected:m===a}),onClick:function(e){y?(e.stopPropagation(),b||s(n)):l(n)},style:{paddingLeft:u}},!y&&o.default.createElement("span",{className:f.length<1&&P?"no-child":null,onClick:function(e){e.stopPropagation(),b||s(n)}},o.default.createElement("svg",{viewBox:"0 0 8 8",style:d?null:{visibility:"hidden"}},o.default.createElement("path",{className:(0,r.default)("path",{leaf:b}),d:g?"M0 2 H8 L4 6 Z":"M2 0 V8 L6 4 Z"}))),P&&o.default.createElement(i.Icon,{cls:"broad_home"}),y&&o.default.createElement(i.Icon,{cls:g?"tree_index":"tree_group",color:"#222"}),!y&&w&&o.default.createElement(i.Icon,{cls:w,color:v}),!y&&!w&&v&&o.default.createElement("div",{className:"default-icon ",style:{background:v}}),o.default.createElement("span",{className:"tree-node-title-name"},h)),g&&f&&o.default.createElement("div",{className:(0,r.default)("tree-node-content",{expand:g})},f&&f.map((function(t){return o.default.createElement(e,{key:t._id,page:t,selID:a,onExpand:s,homePageId:p,onSelected:l,offset:u+24,downArrowShow:d})}))))};l.propTypes={page:a.default.shape({}),selID:a.default.string,onExpand:a.default.func,onSelected:a.default.func,offset:a.default.number,downArrowShow:a.default.bool},l.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=l},2369:function(e,t,n){},2370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(49),r=n(7);n(2322);var i=n(2323);t.default=function(e){var t=e.name,n=e.icon,s=e.shareID,l=n||i;return o.createElement("div",{className:"c-preview-guide"},o.createElement("div",{className:"gesture top"},o.createElement(a.Icon,{cls:"interaction_gestu1",size:24,color:"#999"})),o.createElement("div",{className:"guide-top"},o.createElement("img",{src:l}),o.createElement("p",null,t)),o.createElement("div",{className:"guide-bottom"},o.createElement("p",null,r.default("preview.guide.addToScreen")),o.createElement("p",null,r.default("preview.guide.clickScreenTop")),o.createElement("p",null,r.default("preview.guide.selectOpenInSafari")),o.createElement("p",null,r.default("preview.guide.addedBestExperience")),o.createElement("p",null,r.default("preview.guide.afterAdding"),o.createElement("span",{onClick:function(){sessionStorage.setItem("fromGuide","true"),window.location.href="/run/"+s+"?force=1"}},r.default("preview.guide.directlyOpen")))))}},2371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(49),r=n(7);n(2322);var i=n(2323);t.default=function(e){var t=e.name,n=e.icon,s=e.shareID,l=n||i;return o.createElement("div",{className:"c-preview-guide"},o.createElement("div",{className:"guide-top"},o.createElement("img",{src:l}),o.createElement("p",null,t)),o.createElement("div",{className:"guide-bottom"},o.createElement("p",null,r.default("preview.guide.addToScreen")),o.createElement("p",null,r.default("preview.guide.clickScreenBottom")," ",o.createElement(a.Icon,{cls:"workdesk",size:10,color:"#007aff"})),o.createElement("p",null,r.default("preview.guide.selectAddToScreen")),o.createElement("p",null,r.default("preview.guide.addedBestExperience")),o.createElement("p",null,r.default("preview.guide.afterAdding"),o.createElement("span",{onClick:function(){sessionStorage.setItem("fromGuide","true"),window.location.href="/run/"+s+"?force=1"}},r.default("preview.guide.directlyOpen")))),o.createElement("div",{className:"gesture bottom"},o.createElement(a.Icon,{cls:"interaction_gestu2",size:24,color:"#999"})))}},2372:function(e,t,n){},2373:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(8),s=n(38),l=n(2324),c=n(120),u=n(49),d=n(2377),p=n(2380),f=n(2382),h=n(2386),g=n(2316),m=n(42),v=n(87),w=n(55),y=n(2315),b=n(2388),P=n(660),S=n(656),E=n(7);n(2390);var k,O,I=n(37);!function(e){e.alwaysShowLinkArea="la",e.autoScreen="fc",e.showControllerPanel="ps",e.showLinkAreaWhenHovered="ha",e.mobileType="dt"}(k||(k={})),function(e){e.alwaysShowLinkArea="alwaysShowLinkArea",e.autoScreen="autoScreen",e.showControllerPanel="showControllerPanel",e.showLinkAreaWhenHovered="showLinkAreaWhenHovered",e.mobileType="mobileType"}(O||(O={}));var L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.axureRef=r.createRef(),n.shell=r.createRef(),n.contextDom=r.createRef(),n.getUrlPreviewOptionsInfo=function(e){var t={alwaysShowLinkArea:k.alwaysShowLinkArea,autoScreen:k.autoScreen,showControllerPanel:k.showControllerPanel,showLinkAreaWhenHovered:k.showLinkAreaWhenHovered,mobileType:k.mobileType},n={};return e&&(n=l.parse(e)),{alwaysShowLinkArea:n[t[O.alwaysShowLinkArea]],mobileType:n[t[O.mobileType]],showControllerPanel:n[t[O.showControllerPanel]],showLinkAreaWhenHovered:n[t[O.showLinkAreaWhenHovered]],showToolbar:!0,autoScreen:n[t.autoScreen]}},n.getAxurePageDataURL=function(e){var t=decodeURI(e),n=t.lastIndexOf(".html");return t=t.substring(0,n+5)},n.changeAxureUrl=function(e){var t,o,a=n.props,r=a.loaded,i=a.app;if(r){var s=m.getFlattenPages(i.children);if(0===s.length)return;var l=s.find((function(t){return t.dataURL===n.getAxurePageDataURL(e)}));l&&(n.onPageSelected(l._id,!0),null===(o=null===(t=document.getElementById("axure-page"))||void 0===t?void 0:t.contentWindow)||void 0===o||o.postMessage({type:"optionsChanged",opt:n.state.previewOptions},"*"))}},n.changeAxureAdaptiveViews=function(e){e&&0===e.length?n.setState({axureAdaptiveViews:null}):n.setState({axureAdaptiveViews:e})},n.receiverMessage=function(e){var t,o,a,r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.resize,i=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.axureLocation,s=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.adaptiveViews;if(i&&n.changeAxureUrl(i),s&&n.changeAxureAdaptiveViews(s),r){var l=n.state.scale,c=l;if(l<.1&&r>0||l>4&&r<0)return null;var u=Math.min(Math.pow(100*l/50,1.7)+4,Math.pow(100*l/30,2)+2);c=r<0?l-u/100:l+u/100,c=Math.min(4,Math.max(.1,c)),e.data&&e.data.resize&&n.setState({scale:c})}},n.onContextMenu=function(e){e.preventDefault()},n.onToggled=function(){n.shell.current&&n.shell.current.calculatePoint()},n.onExit=function(){var e=n.props.app,t=e.appID,o=e.type,a=e._id,r="/app/"+t+"/design";o!==w.AppTypes.SubAxure&&o!==w.AppTypes.SubMockPlus||(r="/app/"+t+"/prototype/"+a),window.location.href=r},n.onChangeScale=function(e){n.setState({scale:e})},n.doInitPreviewOptions=function(){var e,t,o=n.props,a=o.app,r=o.loaded,i=o.location,s={};r&&a&&(s=i.search?n.getUrlPreviewOptionsInfo(i.search):{showLinkAreaWhenHovered:a.showLinkAreaWhenHovered,alwaysShowLinkArea:a.alwaysShowLinkArea,mobileType:a.mobileType,showControllerPanel:a.showControllerPanel,showToolbar:a.showToolbar,autoScreen:a.autoScreen},w.isAxureApp(a.type)&&(i.search?s=n.getUrlPreviewOptionsInfo(i.search):(s.showLinkAreaWhenHovered=!0,s.alwaysShowLinkArea=!1),null===(t=null===(e=document.getElementById("axure-page"))||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({type:"optionsChanged",opt:s},"*")),n.setState({previewOptions:s}))},n.doInitTreeData=function(){var e=n.props,t=e.app,o=e.loaded,a=n.state.treeData;if(o&&t&&!a){var r=t.homepage;r&&n.setHome(t.children,r),n.setState({treeData:t.children})}},n.autoScale=function(e){e?n.setState({scale:e}):n.setState({scale:1})},n.doZoom=function(e){n.setState({scale:e/100})},n.handleWindowMouseDown=function(){var e=n.state.previewOptions,t=n.props.onLinkAreaFadeInStart;e&&!e.alwaysShowLinkArea&&t()},n.handleSwitchControlPanelVisible=function(){var e=n.state.previewOptions;e.showControllerPanel=!e.showControllerPanel,n.setState({previewOptions:e},(function(){var t=n.getUrlSearchObj(e);n.changeUrl(t)}))},n.onCopyPreviewURL=function(e,t,o){var a=n.props.showMessage,r="";if(I.larkPC){var i=encodeURIComponent("pages/common/index?otherUrl="+e+"&isPreview=true");r=E.default("lark.previewPrompt")+"\r\n      "+E.default("lark.openInLark")+I.larkAppLink+"/client/mini_program/open?appId="+I.larkAppId+"&mode=window&path="+i+"\r\n      "+E.default("lark.openInBrowser")+e,o&&(r+="\r\n      "+E.default("preview.previewVisitPass")+t)}else{var s=""+E.default("preview.previewLinkText")+e+" \n",l=""+E.default("preview.previewVisitPass")+t;r=o?s+l:""+e}P.copy(r)&&a(E.default("preview.copySuccess"))},n.onPageSelected=function(e,t){if(t){var o=n.props.app,a=n.props.match.params,r=a.module,i=a.prototypeID;return o&&("prototype"===r?n.props.redirectTo("/run/"+r+"/"+o.shareID+"/"+i+"/"+e,null,!1):n.props.redirectTo("/run/"+r+"/"+o.shareID+"/"+e,null,!1)),void n.setState({selectedPageID:e},(function(){n.props.changeUrlMessage()}))}var s=n.props.app,l=n.props.match.params,c=l.module,u=l.prototypeID;s&&("prototype"===c?n.props.redirectTo("/run/"+c+"/"+s.shareID+"/"+u+"/"+e,null,!1):n.props.redirectTo("/run/"+c+"/"+s.shareID+"/"+e,null,!1)),n.setState({selectedPageID:e},(function(){n.props.onPageSelected(e)}))},n.getUrlSearchObj=function(e){var t=n.props.app,o={};if(w.isMockplusApp(t.type))o=a({},e.showControllerPanel?"ps":"",1);else if(w.isAxureApp(t.type)){var r;a(r={},e.alwaysShowLinkArea?"la":"",1),a(r,e.showControllerPanel?"ps":"",1),a(r,e.showLinkAreaWhenHovered?"ha":"",1),o=r}else{var i;a(i={},e.alwaysShowLinkArea?"la":"",1),a(i,e.autoScreen?"fc":"",1),a(i,e.showControllerPanel?"ps":"",1),a(i,e.showLinkAreaWhenHovered?"ha":"",1),a(i,"dt",e.mobileType),o=i}return delete o[""],o},n.changeUrl=function(e){n.props.history.push("?"+l.stringify(e))},n.onOptionsChanged=function(e){var t,o,a=n.props.app;w.isAxureApp(a.type)&&(null===(o=null===(t=document.getElementById("axure-page"))||void 0===t?void 0:t.contentWindow)||void 0===o||o.postMessage({type:"optionsChanged",opt:e},"*"));var r=n.getUrlSearchObj(e);n.changeUrl(r),n.setState({previewOptions:e})},n.axureAdaptiveViewChange=function(e){"auto"!==e&&n.setState({view:e})},n.shellDom=r.createRef(),n.isFirstLoaded=!0,n.state={scale:1,treeData:null,selectedPageID:e.currentPage?e.currentPage._id:"",previewOptions:{alwaysShowLinkArea:!0,mobileType:v.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!0,axureAdaptiveViews:null,view:""}},n.setHome=n.setHome.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("contextmenu",this.onContextMenu),this.doInitPreviewOptions(),this.doInitTreeData(),window.addEventListener("message",s.throttle(this.receiverMessage,66))}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.isFirstLoaded){var o=this.props,a=o.loaded,r=o.currentPage,i=o.onPreLoadImage;if(a){var s=this.props.app;if(0===m.getFlattenPages(s.children).length)return;this.isFirstLoaded=!1,this.doInitPreviewOptions(),i(r._id),this.doInitTreeData(),document.title=null==s?void 0:s.name}}this.props.currentPage._id!==e.currentPage._id&&this.setState({selectedPageID:this.props.currentPage._id},(function(){if(e.location.search){var t=n.getUrlSearchObj(n.state.previewOptions);n.changeUrl(t)}}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("message",this.receiverMessage);var e=this.props.onUnmount;e&&e()}},{key:"setHome",value:function(e,t){var n=this;e&&e.forEach((function(e){e._id===t&&(e.isHomepage=!0),e.children&&n.setHome(e.children,t)}))}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.app,o=e.user,a=e.preview,s=e.goBackWard,l=e.goForWard,c=e.goHome,u=e.goPrevPage,h=e.goNextPage,g=e.notFromInvitation,m=e.isLarkTeam,v=e.openLarkShareDialog,y=this.state,b=y.previewOptions,P=y.scale,E=y.treeData,k=y.selectedPageID,O=y.axureAdaptiveViews;if(!b||!a||!E)return null;var L=k;if(w.isRpApp(n.type)){var T="/rp/run/"+n.shareID;return L&&(T+="/"+L),S.isInIframe()&&(T+="?embeded=1"),r.createElement("iframe",{className:"rp-run-iframe",src:T})}var _=this.props.match.params,C=_.module,x=_.prototypeID,A=!a.license||"free"===a.license.license,D=-1===window.location.href.indexOf("control=false");return r.createElement(d.default,{className:i.default("hot-keys-container",{"preview-container-larkPc":I.larkPC}),keyDownHandlers:{escape:this.onExit,arrowleft:s,arrowright:l,arrowup:u,arrowdown:h},keyUpHandlers:{}},r.createElement("div",{className:i.default("c-preview",{"preview-container-larkPc":I.larkPC})},r.createElement(p.default,{isShow:D&&b.showControllerPanel,isFree:A,name:n.name,username:n.username,appType:n.appType,options:b,onOptionsChanged:this.onOptionsChanged,onClose:this.handleSwitchControlPanelVisible,data:E,selectedID:L,onPageSelected:this.onPageSelected,onToggled:this.onToggled,teamName:n.teamName,notFromInvitation:g,showOptions:w.isNormalApp(n.type),isMockplusApp:w.isMockplusApp(n.type),axureAdaptiveViews:O,axureAdaptiveViewChange:this.axureAdaptiveViewChange}),this.renderPreviewContent()),r.createElement(f.default,{user:o,isShow:D&&b.showToolbar,showControllerPanel:b.showControllerPanel,scale:100*P,canBack:a.hasBack,canNext:a.hasNext,currentPage:t._id,onToggleControllerPanelVisible:this.handleSwitchControlPanelVisible,onBackWard:s,onForWard:l,onGoHome:c,onZoomChange:this.doZoom,onExit:this.onExit,onCopyPreviewURL:this.onCopyPreviewURL,zip:a.zip,isLarkTeam:m,openLarkShareDialog:v,moduleID:null!=x?x:C}))}},{key:"renderPreviewContent",value:function(){var e,t=this.props,n=t.currentPage,o=t.nextPage,a=t.app,i=t.interactions,s=t.preview,l=t.linkFadeIn,c=t.needPerspective,d=t.overlayPage,p=t.overlayAnimation,f=this.state,m=f.previewOptions,v=f.scale,P=f.treeData,S=f.view;if(!m||!s||!P)return null;if(w.isAxureApp(a.type)&&n.dataURL)return r.createElement("div",{className:"preview-context",ref:this.contextDom},r.createElement("div",{className:"special-preview-page-wrapper",style:{transform:"scale("+v+")",transformOrigin:"top left",width:100/v+"%",height:100/v+"%"}},r.createElement(y.default,{isPreviewPage:!0,clientID:n.clientID,sourceInfo:n.sourceInfo,dataURL:n.dataURL,preventEvents:!1,ref:this.axureRef,adjustBodyPosition:!1,view:S})));if(w.isMockplusApp(a.type))return r.createElement("div",{className:"preview-context",ref:this.contextDom},r.createElement("div",{className:"special-preview-page-wrapper special-preview-page-wrapper-mockplus",style:{transform:"scale("+v+")",transformOrigin:"top left",width:100/v+"%",height:100/v+"%"}},r.createElement(b.default,{dataURL:n.dataURL})));var E=n?Object.assign({},n.size):{width:0,height:0};return r.createElement("div",{className:"preview-context",ref:this.contextDom},r.createElement(u.ScrollView,null,r.createElement(h.default,{ref:this.shell,shellRef:this.shellDom,size:E,scale:v,appType:null!==(e=a.type)&&void 0!==e?e:a.appType,mobileType:m.mobileType,isLandscape:n.landscape,onMount:this.autoScale,needPerspective:c,autoScreen:m.autoScreen,onChangeScale:this.onChangeScale,isShowToolbar:m.showControllerPanel},r.createElement(g.default,{interactions:i,firstPage:n,nextPage:o,overlayPage:d,scale:v,appType:a.appType,options:m,isFadeIn:l,overlayAnimation:p,panState:s.panState,delta:s.delta,type:a.type,shareID:a.shareID}))))}}]),t}(r.Component);L.defaultProps={app:null,preview:null,currentPage:null,nextPage:null,overlayPage:null,interactions:null,loaded:!1,goHome:null,goBackWard:null,goForWard:null,onPreLoadImage:null,linkFadeIn:!1,onLinkAreaFadeInStart:null,onPageSelected:null,onUnmount:null,needPerspective:!1,overlayAnimation:"",user:null,goPrevPage:null,goNextPage:null,notFromInvitation:!1,isFromApps:!1},t.default=c.withRouter(L)},2377:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(8),s=n(2378);n(2379);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyDown=n.onKeyDown.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.dom=r.createRef(),n.focused=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"onKeyDown",value:function(e){var t=s.convertEventToHotKey(e),n=this.props.keyDownHandlers,o=n&&n[t];o&&(o(e),"ctrl+c"!==t&&e.preventDefault(),e.stopPropagation())}},{key:"onKeyUp",value:function(e){var t=s.convertEventToHotKey(e),n=this.props.keyUpHandlers,o=n&&n[t];o&&(o(e),e.preventDefault(),e.stopPropagation())}},{key:"focus",value:function(){this.dom.current&&this.dom.current.focus()}},{key:"blur",value:function(){this.dom.current&&this.dom.current.blur()}},{key:"render",value:function(){var e,t,n,o=this,s=this.props,l=s.className,c=s.style,u=(s.keyDownHandlers,s.keyUpHandlers,a(s,["className","style","keyDownHandlers","keyUpHandlers"]));return r.createElement("div",Object.assign({className:i.default("hot-key-catcher",(e={},t=l||"",n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),ref:this.dom,style:c,tabIndex:-1,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onBlur:function(){o.focused=!1},onFocus:function(){o.focused=!0}},u),this.props.children)}}]),t}(r.Component);t.default=l},2378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyUpListener=t.addKeyUpListener=t.removeKeyDownListener=t.addKeyDownListener=t.isHotKeyPressed=t.convertEventToHotKey=void 0;var o=n(18),a={},r={};t.convertEventToHotKey=function(e){var t=[],n=e.key.toLowerCase();return("control"===n||"meta"===n||e.metaKey||e.ctrlKey)&&t.push("ctrl"),(e.altKey||"alt"===n)&&t.push("alt"),(e.shiftKey||"shift"===n)&&t.push("shift"),!function(e){return o.isMacOS?"backspace"===e:"delete"===e||"del"===e}(n)?function(e){return-1===["control","shift","alt","meta"].indexOf(e.toLowerCase())}(e.key)&&t.push(e.key):t.push("delete"),t.join("+").toLowerCase()};var i=function(e){switch(e){case"rename":return o.isMacOS?"enter":"f2";case"esc":return"escape";case"space":return" ";case"del":return"delete";default:return e}},s=function(e){return e.toLowerCase().split("+").map(i).join("+")};window.addEventListener("keydown",(function(e){var n=t.convertEventToHotKey(e);a[n]&&a[n].forEach((function(t){t(e)}))})),window.addEventListener("keyup",(function(e){var n=t.convertEventToHotKey(e);r[n]&&r[n].forEach((function(t){t(e)}))}));var l=function(e,t,n){if("number"!=typeof t){var o=s(t);e[o]||(e[o]=[]),e[o].push(n)}},c=function(e,t,n){if("number"!=typeof t){var o=s(t);e[o]&&e[o].splice(e[o].indexOf(n),1)}};t.isHotKeyPressed=function(e,n){return t.convertEventToHotKey(e)===s(n)},t.addKeyDownListener=function(e,t){l(a,e,t)},t.removeKeyDownListener=function(e,t){c(a,e,t)},t.addKeyUpListener=function(e,t){l(r,e,t)},t.removeKeyUpListener=function(e,t){c(r,e,t)}},2379:function(e,t,n){},2380:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(8),i=n(87),s=n(49),l=n(2321),c=n(7),u=n(43),d=n(50),p=n(314),f=n(18),h=n(2325);n(2381);var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doToggleProgress=function(){var e=0,t=n.props.onToggled;!function n(){e<9&&window.requestAnimationFrame(n),e>0&&t(),e+=1}()},n.handleOptionsChanged=function(e){var t=n.props,o=t.options,a=t.onOptionsChanged,r=Object.assign(Object.assign({},o),e);a&&a(r)},n.handleChange=function(e){var t=n.props.data;if(n.setState({inputValue:e}),e.trim()){var o=e.toLocaleLowerCase(),a=t.filter((function(e){return u.isNodeOrChildrenMatch(e,o)}));n.setState({treeData:a})}else n.setState({treeData:n.props.data})},n.onStopSearch=function(){n.setState({isShowSearch:!1,inputValue:"",treeData:n.props.data})},n.renderPhoneType=function(){var e=n.props,t=e.options,o=e.showOptions,l=e.axureAdaptiveViews,c=n.state,u=c.isShowSearch,d=c.inputValue,p=c.axureAdaptiveViewSelected,f=t.mobileType,h=null==l?void 0:l.map((function(e){var t,n,o;return(null===(t=null==e?void 0:e.size)||void 0===t?void 0:t.width)?(null==e?void 0:e.name)+" ("+(null===(n=null==e?void 0:e.size)||void 0===n?void 0:n.width)+" x "+(null===(o=null==e?void 0:e.size)||void 0===o?void 0:o.height)+")":e.name}));return a.createElement("div",{className:r.default("mobile-type",{"mobile-type-no-options":!o})},u?a.createElement(s.SearchInput,{value:d,onChange:n.handleChange,autoFocus:!0,showClose:!0,onStopSearch:n.onStopSearch,onBlur:function(){d||n.setState({isShowSearch:!1,inputValue:"",treeData:n.props.data})}}):a.createElement(a.Fragment,null,a.createElement(s.Icon,{cls:"board_search",clickArea:{width:24,height:24},onClick:function(){n.setState({isShowSearch:!0})}}),o&&a.createElement(s.Select,{value:f,width:120,position:"right",options:Object.keys(i.MobileType).map((function(e){return i.MobileType[e]})),onSelect:function(e){n.handleOptionsChanged({mobileType:e})}}),l&&a.createElement(s.Select,{value:p,width:120,menuWidth:230,position:"right",options:h,onSelect:function(e,t){var o,a,r,i;n.setState({axureAdaptiveViewSelected:e}),n.props.axureAdaptiveViewChange(null===(o=l[t])||void 0===o?void 0:o.id),null===(r=null===(a=document.getElementById("axure-page"))||void 0===a?void 0:a.contentWindow)||void 0===r||r.postMessage({type:"axureAdaptiveViewChange",opt:null===(i=l[t])||void 0===i?void 0:i.id},"*")}})))},n.state={expand:e.isShow,isShowSearch:!1,inputValue:"",treeData:e.data,axureAdaptiveViewSelected:"Adaptive",showCompetition:"true"!==localStorage.getItem("close_preview_competition")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({expand:e.isShow})}},{key:"componentDidUpdate",value:function(e){e.isShow!==this.state.expand&&this.doToggleProgress()}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,o=t.onClose,i=t.options,u=t.selectedID,g=t.onPageSelected,m=t.showOptions,v=t.data,w=t.username,y=t.isMockplusApp,b=this.state,P=b.expand,S=b.treeData,E=b.isShowSearch,k=b.inputValue,O=b.showCompetition,I=i.alwaysShowLinkArea,L=i.showLinkAreaWhenHovered,T=i.autoScreen,_=d.getFlatNodes(v).filter((function(e){return!e.isGroup}));return a.createElement("div",{className:r.default("c-controller-panel",{expand:P,fold:!P}),onMouseDown:function(e){e.stopPropagation()}},a.createElement("div",{className:"preview-left-panel"},a.createElement("div",{className:r.default("option-panel")},a.createElement("div",{className:"project-name"},a.createElement("span",{className:"name",title:n||""},n),a.createElement("div",{className:"project-info"},a.createElement("span",{className:"username"},w),a.createElement("span",{className:"project-info-dot"},"·"),a.createElement("span",null,c.default("preview.pageCount",null==_?void 0:_.length))),a.createElement("div",{className:"preview-close"},a.createElement(s.Icon,{cls:"demo_close",onClick:function(){o&&o()}}))),!y&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:c.default("prototype.alwaysShowLinkArea"),checked:I,onChange:function(t){e.handleOptionsChanged({alwaysShowLinkArea:t})}})),!y&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:c.default("prototype.showLinkAreaWhenHovered"),checked:L,onChange:function(t){e.handleOptionsChanged({showLinkAreaWhenHovered:t})}})),m&&a.createElement("div",{className:"option-check"},a.createElement(s.Checkbox,{text:c.default("prototype.autoScreen"),checked:T,onChange:function(t){e.handleOptionsChanged({autoScreen:t})}})),this.renderPhoneType()),a.createElement("div",{className:"tree-frame"},a.createElement(s.ScrollView,null,!S.length&&E?a.createElement("div",{className:"search-empty"},a.createElement("img",{src:h,alt:"",width:"64"}),a.createElement("p",null,c.default("projectTree.emptySearch"))):a.createElement(l.default,{key:"tree",searchKey:k,data:S,selectedID:u,onPageSelected:g}))),O&&f.isZh&&a.createElement("div",{className:"c-preview-competition-wrapper"},a.createElement("div",{className:"c-preview-competition",onClick:function(){return window.open(p.COMPETITION_LINK+"/?hmsr=preview")}},a.createElement("div",{className:"close-btn"},a.createElement(s.Icon,{cls:"close",size:12,clickArea:{width:16,height:16},onClick:function(t){t.stopPropagation(),e.setState({showCompetition:!1},(function(){localStorage.setItem("close_preview_competition","true")}))}}))))))}}]),t}(a.Component);g.defaultProps={name:null,isFree:!0,appType:null,options:{alwaysShowLinkArea:!0,mobileType:i.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!0},data:[],selectedID:null,notFromInvitation:!1},t.default=g},2381:function(e,t,n){},2382:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(38),i=n(8),s=n(49),l=n(2383),c=n(7),u=n(37),d=n(122);n(2385);var p=n(18),f=function(e){var t="preview_navigation_bar_position";if(!e){var n=p.getLocalStorage().getItem(t);if(n){var o=JSON.parse(n),a=window.innerHeight;return o.top=Math.min(o.top,a-50),o.right=Math.max(o.right,-200),o}return{top:50,right:50}}return localStorage.setItem(t,JSON.stringify(e)),null},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.zoomerDom=a.createRef(),n.self=a.createRef(),n.qrCode=a.createRef(),n.initQrcode=!1,n.setQrShow=function(e){n.setState({showQrCode:e}),e&&n.zoomerDom.current.closePanel(),n.manageQrMouseDown(e)},n.manageResizeEvent=function(){n.props.isShow?window.addEventListener("resize",n.handleResize):window.removeEventListener("resize",n.handleResize)},n.manageQrMouseDown=function(e){e?window.addEventListener("mousedown",n.closeQrCode):window.removeEventListener("mousedown",n.closeQrCode)},n.closeQrCode=function(){n.setState({showQrCode:!1}),n.manageQrMouseDown(!1)},n.handleResize=function(){if(n.props.isShow){var e=n.state.pt,t=n.self.current&&n.self.current.getBoundingClientRect();if(t){var o=t.left,a=t.width,r=window.innerWidth;if(o<0){var i=r-a;n.setState({pt:Object.assign(Object.assign({},e),{right:i})})}}}},n.handleMouseDown=function(e){if("IMG"!==e.target.tagName){var t=n.state,o=t.pt,a=t.showQrCode,i=o.top,s=o.right,l={top:i,right:s},c=n.self.current.getBoundingClientRect(),u=window.innerWidth,p=window.innerHeight,h=document.getElementsByTagName("iframe");h&&h.length>0&&r.each(h,(function(e){e.style.pointerEvents="none"})),d.dragDelegate((function(e,t){if(e.stopPropagation(),e.which){var o=t.x,a=t.y;l.top=Math.max(0,Math.min(i+a,p-c.height)),l.right=Math.max(0,Math.min(s-o,u-c.width)),n.setState({pt:Object.assign({},l),navigationBarHidden:0===l.right,showRightHiddenLine:!0}),0===l.right?setTimeout((function(){n.setState({navigationBarHiddenFinish:!0})}),500):n.setState({navigationBarHiddenFinish:!1})}}),(function(e,t,o){var i=n.state.isClickQrCodeIcon;n.setState({showRightHiddenLine:!1}),o&&f(l),i?(n.setState({isClickQrCodeIcon:!1}),n.setQrShow(a)):(n.setState({isClickQrCodeIcon:!1}),n.closeQrCode()),h&&h.length>0&&r.each(h,(function(e){e.style.pointerEvents="auto"}))}))}},n.handleMouseEnter=function(){var e=n.state,t=e.navigationBarHidden,o=e.pt,a=e.navigationBarHiddenFinish;t&&a&&n.setState({pt:{top:o.top,right:0},navigationBarHidden:!1,showRightHiddenLine:!1})},n.handleMouseLeave=function(){var e=n.state,t=(e.navigationBarHidden,e.pt);e.navigationBarHiddenFinish;0===t.right&&n.setState({navigationBarHidden:!0})};var o=window.localStorage.getItem("copyPreviewLinkType")||"0";return n.state={pt:f(),showQrCode:!1,codeTop:0,isClickQrCodeIcon:!1,showShareLinkDrop:!1,currentShareLinkIndex:parseInt(o),showShareDialog:!1,navigationBarHidden:!1,showRightHiddenLine:!1,navigationBarHiddenFinish:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.handleResize(),this.manageResizeEvent()}},{key:"render",value:function(){var e,t=this,n=this.state,o=n.pt,d=n.showShareDialog,p=n.navigationBarHidden,f=n.showRightHiddenLine,h=this.props,g=h.onToggleControllerPanelVisible,m=h.onGoHome,v=h.onBackWard,w=h.onForWard,y=h.onZoomChange,b=h.user,P=h.scale,S=h.isShow,E=h.canBack,k=h.canNext,O=h.onExit,I=h.showControllerPanel,L=h.currentPage,T=h.onCopyPreviewURL,_=h.moduleID;if(!S)return null;for(var C=window;C.parent!==C;)C=C.parent;return a.createElement("div",{ref:this.self,style:o,className:i.default("c-preview-navigation-bar",{"navigation-bar-hidden":p,"c-preview-navigation-bar-larkPc":u.larkPC}),onMouseDown:p?void 0:this.handleMouseDown,onMouseLeave:this.handleMouseLeave},a.createElement("div",{className:"navigation-bar-container"},a.createElement("div",{className:"c-preview-hidden-navigation-bar",onMouseOver:p?r.debounce(this.handleMouseEnter,300):void 0},a.createElement(s.Icon,{cls:"tag_left_arrow01",size:"16"})),a.createElement("div",{className:"navigation-bar-content"},a.createElement(s.Icon,{cls:"demo_control",tooltip:I?c.default("prototype.hideControllerPanel"):c.default("prototype.showControllerPanel"),onClick:g}),a.createElement(s.Icon,{cls:"demo_home",tooltip:c.default("preview.goHome"),onClick:m}),a.createElement(s.Icon,{cls:"demo_leftarrow",tooltip:c.default("preview.goBackWard"),color:E?void 0:"#ccc",onClick:v}),a.createElement(s.Icon,{cls:"demo_rightarrow",tooltip:c.default("preview.goForWard"),color:k?void 0:"#ccc",onClick:w}),a.createElement("div",{className:"zoomer-container",onMouseDown:function(e){e.stopPropagation(),t.setQrShow(!1)}},a.createElement(s.Zoomer,{onZoom:y,ref:this.zoomerDom,min:20,max:400,step:10,value:P,canInput:!1,canSelect:!0})),!!(null===(e=null==b?void 0:b.user)||void 0===e?void 0:e.id)&&a.createElement("div",null,a.createElement(s.Icon,{cls:"demo_share",tooltip:c.default("preview.sharePreviewURL"),onClick:function(){return t.setState({showShareDialog:!0})}})),d&&a.createElement(l.default,{currentPage:L,closeShareRun:function(){return t.setState({showShareDialog:!1})},onCopyPreviewURL:T,moduleID:_}),u.larkPC&&a.createElement(s.Icon,{cls:"demo_quit",tooltip:c.default("preview.exit"),onClick:O}),f&&a.createElement("div",{className:"right-hidden-line"}))))}}]),t}(a.Component);h.defaultProps={scale:100,isShow:!0,canBack:!1,canNext:!1,zip:!1},t.default=h},2383:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,i,s=n(0),l=n(2324),c=n(120),u=n(98),d=n(212),p=n(46),f=n(55),h=n(87),g=n(49),m=n(7),v=n(313),w=n(30),y=n(37);n(2384),function(e){e.alwaysShowLinkArea="la",e.autoScreen="fc",e.showControllerPanel="ps",e.showLinkAreaWhenHovered="ha",e.mobileType="dt"}(r||(r={})),function(e){e.alwaysShowLinkArea="alwaysShowLinkArea",e.autoScreen="autoScreen",e.showControllerPanel="showControllerPanel",e.showLinkAreaWhenHovered="showLinkAreaWhenHovered",e.mobileType="mobileType"}(i||(i={}));var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUrlPreviewOptionsInfo=function(e){var t={alwaysShowLinkArea:r.alwaysShowLinkArea,autoScreen:r.autoScreen,showControllerPanel:r.showControllerPanel,showLinkAreaWhenHovered:r.showLinkAreaWhenHovered,mobileType:r.mobileType},n={};return e&&(n=l.parse(e)),{alwaysShowLinkArea:n[t[i.alwaysShowLinkArea]],mobileType:n[t[i.mobileType]],showControllerPanel:n[t[i.showControllerPanel]],showLinkAreaWhenHovered:n[t[i.showLinkAreaWhenHovered]],showToolbar:!0,autoScreen:n[t.autoScreen]}},n.isMember=function(e){return"member"===e},n.handleSetShareLinkPass=function(){var e=n.props,t=e.app,o=e.sharePassword,a=e.setShareLinkPass,r=e.password,i=e.changePassword,s=new RegExp(/^[\w`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]{0,8}$/);r&&s.test(r)&&r.indexOf(" ")<0?(n.setState({isInputError:""}),r!==o&&a(t._id,r)):r?(i(""),n.setState({isInputError:m.default("preview.setPassInputError")})):n.setState({isInputError:m.default("preview.setPassEmptyError")})},n.canOperatePass=function(){var e=n.props.roleInTeam;return y.isAdminOrSuperAdmin(e)||n.isMember(e)&&n.isCreator()},n.isEnablePassChecked=function(){var e=n.props,t=e.roleInTeam,o=e.app,a=n.state.isEnablePass;return(y.isAdminOrSuperAdmin(t)||n.isMember(t)&&n.isCreator())&&!!a||o.previewNeedPassword},n.changeShareUrl=function(e){p.setPreviewOptions(n.props.app._id,e)},n.getUrlSearchObj=function(e){var t,n=(a(t={},e.alwaysShowLinkArea?"la":"",1),a(t,e.showControllerPanel?"ps":"",1),a(t,e.showLinkAreaWhenHovered?"ha":"",1),a(t,"dt",e.mobileType),t);return delete n[""],n},n.setShareUrl=function(){var e=n.props.shareRunID,t=n.state.options,o="",a=n.isEnablePassChecked()?window.location.protocol+"//"+window.location.host+"/view/"+e:"",r=n.isEnablePassChecked()?"":window.location.protocol+"//"+window.location.host+n.props.match.url;o=a||r;var i=n.getUrlSearchObj(t);return o=o+"?"+l.stringify(i)},n.state={isEnablePass:!1,isInputError:"",options:{alwaysShowLinkArea:!0,showLinkAreaWhenHovered:!0,mobileType:h.MobileType.iphone,showControllerPanel:!0}},n.handleCopy=n.handleCopy.bind(n),n.isCreator=n.isCreator.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.app,n=e.getTeamInfo,o=e.getShareRunLink;n(t.teamID),o(t._id);var a=p.getPreviewOptions(t._id);location.search&&this.setState({options:this.getUrlPreviewOptionsInfo(location.search)}),a&&this.setState({options:a})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.sharePassword;(0,t.onCopyPreviewURL)(e,n,this.isEnablePassChecked())}},{key:"isCreator",value:function(){var e=this.props,t=e.app,n=e.userID;return t.userID===n}},{key:"render",value:function(){var e=this,t=this.props,n=t.app,o=t.password,a=(t.shareRunID,t.sharePassword),r=(t.currentPage,t.closeShareRun),i=t.changePwEnable,l=t.changePassword,c=this.state.isInputError,d=this.setShareUrl(),p=Object.keys(h.MobileType).map((function(e){return h.MobileType[e]}));return u.createPortal(s.createElement("div",{className:"share-panel share-run-dialog",onMouseDown:function(e){e.stopPropagation()}},s.createElement("div",{className:"dlg"},s.createElement(g.Dialog,{title:m.default("preview.shareRunTitile"),showOk:!1,onCancel:r},s.createElement("div",{className:"share-input-box"},s.createElement(g.Input,{disabled:!0,width:310,value:d}),s.createElement(g.Button,{onClick:function(){return e.handleCopy(d)}},m.default("preview.copy"))),s.createElement("div",{className:"share-label-wrap share-tip"},m.default("preview.shareTip")),!f.isAxureOrMockplus(n.type)&&s.createElement(s.Fragment,null,s.createElement("div",{className:"mobile-type share-label-wrap"},s.createElement("span",null,m.default("prototype.deviceShell")),s.createElement(g.Select,{options:p,value:this.state.options.mobileType,position:"right",onSelect:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{mobileType:t})},(function(){e.changeShareUrl(e.state.options)}))}})),s.createElement("div",{className:"share-label-wrap"},s.createElement(g.Checkbox,{checked:this.state.options.alwaysShowLinkArea,text:m.default("prototype.alwaysShowLinkArea"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{alwaysShowLinkArea:t})},(function(){e.changeShareUrl(e.state.options)}))}})),s.createElement("div",{className:"share-label-wrap"},s.createElement(g.Checkbox,{checked:this.state.options.showLinkAreaWhenHovered,text:m.default("prototype.showLinkAreaWhenHovered"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{showLinkAreaWhenHovered:t})},(function(){e.changeShareUrl(e.state.options)}))}}))),s.createElement("div",{className:"share-label-wrap"},s.createElement(g.Checkbox,{checked:this.state.options.showControllerPanel,text:m.default("prototype.showControllerPanel"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{showControllerPanel:t})},(function(){e.changeShareUrl(e.state.options)}))}})),s.createElement("div",{className:"password-wrapper"},s.createElement(g.Checkbox,{checked:this.isEnablePassChecked(),disabled:!this.canOperatePass(),text:m.default("preview.enablePass"),onChange:function(t){e.setState({isEnablePass:t}),i(n.appID,t)}}),this.canOperatePass()&&this.isEnablePassChecked()&&s.createElement(g.Input,{width:y.isUS?140:120,placeholder:m.default("preview.inputPass"),maxLength:8,error:c,value:o,onSubmit:function(){return e.handleSetShareLinkPass()},onBlur:function(){return e.handleSetShareLinkPass()},onInput:function(t){l(t.trim()),e.setState({isInputError:""})}}),!this.canOperatePass()&&n.previewNeedPassword&&s.createElement("span",{className:"password-value"},a))))),document.body)}}]),t}(s.Component),P=d.connect((function(e){var t=e.teamInfo,n=e.user,o=e.preview;return{teamID:t.id,roleInTeam:t.roleInTeam,userID:n.user&&n.user.id,userName:n.user&&n.user.name,app:o.app,shareRunID:o.shareRunID,sharePassword:o.sharePassword,isLoadLink:o.isLoadLink,password:o.password}}),(function(e,t){var n=t.moduleID;return{getTeamInfo:function(t){e(w.default.preview.getTeamInfo(t))},getShareRunLink:function(t){e(w.default.preview.getShareRunLink(t,n))},setShareLinkPass:function(t,o){e(w.default.preview.setShareLinkPass(t,o,n))},changePwEnable:function(t,n){e(w.default.preview.changePwEnable(t,n))},changePassword:function(t){e(w.default.preview.changePassword(t))}}}))(c.withRouter(b));t.default=function(e){return s.createElement(v.default.Consumer,null,(function(t){var n=t.showMessage;return s.createElement(P,Object.assign({},e,{showMessage:n}))}))}},2384:function(e,t,n){},2385:function(e,t,n){},2386:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(8),i=n(2317),s=n(41),l=n(659),c=n(653),u=n(55);n(2387);var d=n(18),p=l.default(),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculatePoint=function(){var e=n.props.shellRef,t=n.state,o=t.containerHeight,a=t.containerWidth;if(e){var r=e.current.parentNode.getBoundingClientRect(),i=r.height,s=r.width;o===i&&a===s||n.setState({containerHeight:i,containerWidth:s})}},n.calculateAutoScreenScale=function(){var e=n.props,t=e.onChangeScale,o=e.appType,a=e.shellRef,r=e.scale,s=e.isLandscape,l=e.mobileType,d=e.size,p=u.isNormalApp(o)&&l!==c.MOBILE_TYPE_NONE,f=null,h=r;if(a){var g=a.current.parentNode.getBoundingClientRect(),m=g.width,v=g.height;if(p){if(f=i.default.getShellInfo(l,s)){var w=f,y=w.defaultScreenSize,b=w.shellSize,P=w.screenBounds;h=m/v<b.width/b.height?(m-40)/(b.width*(y.height/P.height)):(v-40)/(b.height*(y.width/P.width))}}else h=(m-40)/d.width}t(h)},n.state={containerHeight:0,containerWidth:0,cursorPressed:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.calculatePoint();var e=this.props,t=e.onMount;e.autoScreen?setTimeout(this.calculateAutoScreenScale,0):setTimeout(t,0),window.addEventListener("resize",p.call)}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.props,o=n.appType,a=n.autoScreen,r=n.mobileType,i=n.onMount,s=n.isLandscape,l=n.size,d=!1;(d=u.isNormalApp(o)?r!==c.MOBILE_TYPE_NONE?e.mobileType!==r||e.autoScreen!==a||e.isLandscape!==s:e.mobileType!==r||e.autoScreen!==a||e.size.width!==l.width||e.size.height!==l.height:e.autoScreen!==a||e.size.width!==l.width||e.size.height!==l.height)&&e.autoScreen?setTimeout(this.calculateAutoScreenScale,0):d&&!e.autoScreen&&setTimeout(i,0)}},{key:"componentWillUpdate",value:function(){p.remove(this.calculatePoint)}},{key:"componentDidUpdate",value:function(){p.add(this.calculatePoint)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",p.call)}},{key:"renderMobileShell",value:function(e){var t=this.props,n=t.appType,o=t.mobileType;if(!u.isNormalApp(n)||o===c.MOBILE_TYPE_NONE)return null;if(e){var i=e.shellImage,s={};return s[o.toLowerCase()]=!0,a.createElement("div",{className:r.default("device-box",s),style:{width:"100%",height:"100%",top:0,left:0,position:"absolute"}},a.createElement("img",{src:i,style:{width:"100%",height:"100%",top:0,left:0,position:"absolute",pointerEvents:"none"},draggable:!1}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.size,o=t.scale,l=t.mobileType,p=t.isLandscape,f=t.appType,h=t.shellRef,g=t.needPerspective,m=t.isShowToolbar,v=this.state,w=v.containerHeight,y=v.containerWidth,b=v.cursorPressed,P=Object.assign({},s.size.scale(n,o)),S=0,E=0,k=P.width,O=P.height,I=u.isNormalApp(f)&&l!==c.MOBILE_TYPE_NONE,L=k,T=O,_=k,C=O,x=null;if(I){if(x=i.default.getShellInfo(l,p)){var A=x,D=A.defaultScreenSize,N=A.shellSize,j=A.screenBounds,M=D.width/j.width*o;S=Math.max(S,Math.ceil(j.left*M)),E=Math.floor(j.top*M),C=Math.ceil(j.height*M),_=Math.round(j.width*M),L=Math.round(N.width*M),T=Math.round(N.height*M)}}else C=T=window.innerHeight;var R={top:E,width:_,height:C},U=0;Math.max(m?20:0,Math.round((y-L)/2));return I?U=Math.max(20,Math.round((w-T)/2)):(R.height=Math.min(T,O),O<w&&(R.top=Math.round((w-O)/2))),a.createElement("div",{ref:h,style:{width:L,height:T,marginTop:U},className:r.default("c-device",{mobile:I})},a.createElement("div",{className:r.default("device-screen",{mobile:I,perspective:g,isPressed:b,isFF:d.isFireFox}),onMouseDown:function(t){t.stopPropagation(),e.setState({cursorPressed:!0})},onMouseUp:function(t){t.stopPropagation(),e.setState({cursorPressed:!1})},style:R},this.props.children),this.renderMobileShell(x))}}]),t}(a.Component);f.defaultProps={size:{width:0,height:0},mobileType:null,shellRef:null,isLandscape:!1,scale:1,onMount:null},t.default=f},2387:function(e,t,n){},2388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(121);n(2389);t.default=function(e){var t=e.dataURL,n=a.extname(t),r=a.basename(t,n),i=t.replace(/MBX\/.*$/,"index.html")+"?to="+r;return o.createElement("iframe",{className:"mockplus-preview-iframe",src:i})}},2389:function(e,t,n){},2390:function(e,t,n){},2391:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(212),i=n(87),s=n(2312),l=n(49),c=n(30),u=n(2392),d=n(7),p=n(313),f=n(2313),h=n(658),g=n(42),m=n(213),v=n(2395);n(2404);var w=n(22),y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.messageHandled=!1,n.handleMessage=function(e){e.data&&e.data.toggleTree&&(n.messageHandled=!0,n.setState({showPhoneTree:!0}))},n.changeUrlMessage=function(){window.parent&&window.parent.postMessage({event:"URL_CHANGED",payload:window.location.href},"*")},n.getPreviewDataData=function(){var e=n.props,t=(e.loadAppPreviewData,e.loadLocalPreviewData),o=e.selectedPage;t(JSON.parse(window.data.replace("/\n/g","")),o)},n.onTransitionEnd=function(e){if(n.props.preview.panState){if(e)n.handleAnimateEnd();else{var t=n.props,o=t.currentPage,a=t.skipDone,r=o?o._id:null;r&&(a({target:r}),setTimeout(n.doStartAutoSkip,0))}n.setState({animationFlag:null,interactionFlag:null})}},n.overlayToPage=function(e){var t=n.props,o=t.overlayPage,a=t.overlayTo;o?(n.setState({overlayAnimation:o.animate.animation}),setTimeout((function(){n.setState({overlayAnimation:""}),a(e)}),o.animate.duration)):a(e)},n.doStopAutoSkip=function(){n.autoSkipID&&(clearTimeout(n.autoSkipID),n.autoSkipID=void 0)},n.handleAnimateEnd=function(){var e=n.props,t=e.nextPage,o=e.skipDone;n.doPreLoadImage(t._id);var a=t?t._id:null,r=t.animate,i=r.animation,s=r.duration,l=r.action;a&&(l===h.OVERLAY?n.doSkipOrOverlay({target:a,animation:i,duration:s,action:h.OVERLAY,noStyle:!0}):(o({target:a,animation:i}),setTimeout(n.doStartAutoSkip,0)))},n.handleInteractionClick=function(e,t){clearTimeout(y),y=0;var o=n.props,a=o.goBackWard,r=o.goHome;if(n.setState({linkFadeIn:!1}),n.doStopAutoSkip(),t.type!==i.externalLink)if(t.type===i.backLink||t.action===i.backLink)a();else if(t.type===i.homeLink)r();else{var s=t.target,l=t.action,c=t.animation,u=t.duration,d=t.type;n.doSkipOrOverlay({target:s,action:l,animation:c,duration:u,type:d,noStyle:!1})}else{var p=t.target;window.open(p,"_blank")}},n.doSkipOrOverlay=function(e){var t=n.props.skipTo;if(e.action===h.OVERLAY){var o=e.target,a=e.animation,r=e.duration,i=e.action,s=e.noStyle;n.overlayToPage({target:o,animation:a,duration:r,action:i,noStyle:s})}t(e)},n.handlePageGesture=function(){clearTimeout(y),y=0,n.doPageSkip()},n.handleSkipToPage=function(e,t){var o=n.props.skipTo;n.doStopAutoSkip(),o({target:e}),setTimeout(n.doStartAutoSkip,0),t&&t()},n.handleLinkAreaFadeInEnd=function(){n.state.linkFadeIn&&n.setState({linkFadeIn:!1})},n.handleLinkAreaFadeInStart=function(){n.setState({linkFadeIn:!0})},n.handleInteractionPan=function(e,t){var o=n.props.panTo;n.state.interactionFlag||n.setState({interactionFlag:Object.assign(Object.assign({},t),{animate:t.animation})}),o({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handleInteractionPanDone=function(e,t){(0,n.props.panDone)({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handlePagePan=function(e){var t=n.props,o=t.currentPage,a=t.loaded,r=t.panTo;if(a&&o&&o.onLoaded){var i=o.onLoaded;if(!i)return;var s=n.state.interactionFlag||i,l=s.target,c=s.animate,u=s.duration,d=s.gesture,p=s.action;l&&r({target:l,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.handlePagePanDone=function(e){var t=n.props,o=t.currentPage,a=t.loaded,r=t.panDone;if(a&&o&&o.onLoaded){var i=o.onLoaded;if(!i)return;var s=n.state.interactionFlag||i,l=s.target,c=s.animate,u=s.duration,d=s.gesture,p=s.action;l&&r({target:l,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.doPreLoadImage=function(e){var t=n.props,o=(t.app,t.preLoad),a=t.interactions,r=t.pages;s.preloadImage(e,r,a,o)},n.doStartAutoSkip=function(){var e=n.props,t=e.currentPage,o=e.nextPage,a=e.loaded,r=e.autoSkipToPage;if(a&&t&&!o){var i=t.onLoaded;if(i&&n.pageWhetherExist(i.target)){var s=t.onLoaded,l=s.delay,c=s.target,u=s.animate,d=s.duration,p=s.gesture,f=s.action;c&&!p&&(n.autoSkipID=window.setTimeout((function(){f===h.OVERLAY?n.overlayToPage({target:c,animation:u,duration:d}):(n.doStopAutoSkip(),r(c,{animation:u,duration:d}))}),l))}}},n.pageWhetherExist=function(e){var t=n.props.app;if(t){var o=t.children;return s.validatePageExist(o,e)}return!1},n.doPageSkip=function(){var e=n.props,t=e.currentPage,o=e.nextPage,a=e.loaded,r=e.pageSkipToPage,i=e.overlayPage;if(a&&t&&!o&&t.onLoaded){var s=(i||t).onLoaded;if(!s)return;var l=s.target,c=s.animate,u=s.duration,d=s.action;l&&(d===h.OVERLAY?n.overlayToPage({target:l,animation:c,duration:u}):(n.doStopAutoSkip(),r(l,{animation:c,duration:u})))}},n.exitPreview=function(){s.isLarkApplets?tt&&tt.miniProgram&&tt.miniProgram.navigateBack&&tt.miniProgram.navigateBack():s.isLarkBrowser?window.h5sdk&&window.h5sdk.ready((function(){window.h5sdk.biz.navigation.close({})})):window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("exit")},n.renderNoPage=function(){var e=n.props,t=e.app,o=e.user,r=e.teamInfo,i=e.getTeamInfo;r.id||i(t.teamID);var c=r.roleInTeam;if(!o.user||!m.validatePermission(m.MODE_STORY_BOARD,m.OPERATE_ADD,c,!1))return a.createElement(u.default,null,a.createElement("div",null,d.default("preview.noPage.notTeamMember"),s.isMobileApp&&a.createElement("button",{className:"idoc-phone-back-button",onClick:n.exitPreview},d.default("activity.back"))));var p="/app/"+t._id+"/storyboard";return a.createElement(u.default,{url:p,onClick:function(){localStorage.removeItem("closeUpLoadTip")}},a.createElement("div",null,d.default("preview.noPage.isTeamMember"),s.isMobileApp?a.createElement("button",{className:"idoc-phone-back-button",onClick:n.exitPreview},d.default("activity.back")):a.createElement(l.Link,{className:"add-page-link",href:p},d.default("preview.noPage.addPage"))))},n.renderError=function(){return a.createElement("div",{className:"preview-error"},a.createElement(v.default,null),a.createElement("p",null,n.props.error.message))},n.isFirstLoaded=!0;window.location.search;return n.state={linkFadeIn:!1,needPerspective:!1,overlayAnimation:"",animationFlag:"",interactionFlag:null,showPhoneTree:!1},n.onMobileToggleTree=n.onMobileToggleTree.bind(n),n.onMobileTouchStart=n.onMobileTouchStart.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.getPreviewDataData(),window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"componentWillReceiveProps",value:function(e){var t=e.app,n=e.nextPage;if(n){var o=n.animate.animation,a=this.state.animationFlag;a||this.setState({animationFlag:o}),"flipInX"===a||"flipOutX"===a?this.setState({needPerspective:!0}):this.setState({needPerspective:!1})}if(t){t.inviteAsCollaborator;if(s.isLarkBrowser&&window.h5sdk){var r=t.name;window.h5sdk.ready((function(){window.h5sdk.biz.navigation.setTitle({title:r})}))}}}},{key:"componentDidUpdate",value:function(e){var t,n,o,a,r,i,s,l;if(this.props.loaded&&(this.isFirstLoaded&&this.doStartAutoSkip(),this.isFirstLoaded=!1,(null===(n=null===(t=this.props)||void 0===t?void 0:t.currentPage)||void 0===n?void 0:n._id)!==(null===(o=e.currentPage)||void 0===o?void 0:o._id)&&(null===(a=e.currentPage)||void 0===a?void 0:a._id))){var c=this.props,u=c.app,d=c.match.params,p=d.module,f=d.prototypeID;u&&("prototype"===p?this.props.redirectTo("/run/"+p+"/"+u.shareID+"/"+f+"/"+(null===(i=null===(r=this.props)||void 0===r?void 0:r.currentPage)||void 0===i?void 0:i._id),this.changeUrlMessage):this.props.redirectTo("/run/"+p+"/"+u.shareID+"/"+(null===(l=null===(s=this.props)||void 0===s?void 0:s.currentPage)||void 0===l?void 0:l._id),this.changeUrlMessage))}}},{key:"onMobileToggleTree",value:function(){if(this.messageHandled)this.messageHandled=!1;else{var e=this.state.showPhoneTree;this.setState({showPhoneTree:!e})}}},{key:"onMobileTouchStart",value:function(){var e=this;return y=window.setTimeout((function(){e.setState({showPhoneTree:!0})}),500),!1}},{key:"onMobileTouchMove",value:function(){return clearTimeout(y),!1}},{key:"onMobileTouchEnd",value:function(){clearTimeout(y),y=0}},{key:"render",value:function(){var e=this.props,t=e.childNode,n=e.loaded,o=e.currentPage,r=e.clear,i=e.error,s=e.mode,l=e.redirectTo,c=e.onSelectPage,u=e.loadApp,d=(e.user,e.register,e.app),p=(e.shareID,e.isLarkTeam,e.openLarkShareDialog),h=this.state,g=h.linkFadeIn,m=h.needPerspective,v=h.overlayAnimation,w=h.showPhoneTree;if(n&&i)return this.renderError();if(n&&!o)return this.renderNoPage();if(!n||!t)return null;var y=t;return a.createElement(f.default.Provider,{value:{onPagePan:this.handlePagePan,onPagePanDone:this.handlePagePanDone,onPageGesture:this.handlePageGesture,pageWhetherExist:this.pageWhetherExist,onAnimationEnd:this.handleAnimateEnd,onTransitionEnd:this.onTransitionEnd,onLinkClick:this.handleInteractionClick,onLinkFadeInEnd:this.handleLinkAreaFadeInEnd,onLinkPan:this.handleInteractionPan,onLinkPanDone:this.handleInteractionPanDone}},a.createElement(a.Fragment,null,a.createElement(y,Object.assign({},this.props,{linkFadeIn:g,onPageSelected:this.handleSkipToPage,changeUrlMessage:this.changeUrlMessage,onPreLoadImage:this.doPreLoadImage,onLinkAreaFadeInStart:this.handleLinkAreaFadeInStart,onUnmount:r,needPerspective:m,mode:s,redirectTo:l,onSelectPage:c,loadApp:u,overlayAnimation:v,showPhoneTree:w,openLarkShareDialog:function(){d&&d._id&&p(d._id)},onMobileToggleTree:this.onMobileToggleTree,onMobileTouchStart:this.onMobileTouchStart,onMobileTouchMove:this.onMobileTouchMove,onMobileTouchEnd:this.onMobileTouchEnd}))))}}]),t}(a.Component);b.defaultProps={app:null,currentPage:null,nextPage:null,loaded:!1,interactions:null,childNode:null,skipTo:null,skipDone:null,preLoad:null,goBackWard:null,goForWard:null,goHome:null,loadAppPreviewData:null,loadLocalPreviewData:null,autoSkipToPage:null,clear:null,zip:!1};var P=r.connect((function(e,t){var n,o,a,r,i,s,l=e.preview,c=e.user,u=e.teamInfo,d="prototype"===(null===(o=null===(n=null==t?void 0:t.match)||void 0===n?void 0:n.params)||void 0===o?void 0:o.module)?null===(r=null===(a=null==t?void 0:t.match)||void 0===a?void 0:a.params)||void 0===r?void 0:r.pageID:null===(s=null===(i=null==t?void 0:t.match)||void 0===i?void 0:i.params)||void 0===s?void 0:s.prototypeID,p=t.location.state&&t.location.state.isFromApps,f=l.app,h=l.interactions,m=l.currentPage,v=l.nextPage,y=l.loaded,b=l.zip,P=l.error,S=l.overlayPage,E=l.notFromInvitation,k=void 0,O=w.getMode();if(y&&!P){var I=f.homepage,L=void 0;if(m&&(L=m,I=m._id),S&&(L=S,I=S._id),I){var T=g.getFlattenPages(f.children);k=h.filter((function(e){return L.interactions.includes(e._id)&&e.target!==e.pageID&&T.some((function(t){return t._id===e.target||t.clientID===e.target||""!==e.type}))}))}}return{pages:e[O].pages,shareID:t.match.params.shareID,app:f,loaded:y,preview:l,currentPage:m,nextPage:v,overlayPage:S,interactions:k,zip:b,error:P,user:c,teamInfo:u,selectedPage:d,notFromInvitation:E,isFromApps:p,isLarkTeam:u.isLarkTeam}}),(function(e,t){var n=t.match.params,o=n.shareID,a=n.isRedirect,r=n.module,i=n.prototypeID;return{loadLocalPreviewData:function(t,n){e(c.default.preview.loadLocalPreviewData(t,n))},loadAppPreviewData:function(t){e(c.default.preview.loadPreviewData(o,t,"prototype"===r?i:r,a))},skipTo:function(t){e(c.default.preview.skipTo(t))},skipDone:function(t){e(c.default.preview.skipDone(t))},goHome:function(){e(c.default.preview.goHome())},goBackWard:function(){e(c.default.preview.goBackWard())},goForWard:function(){e(c.default.preview.goForWard())},preLoad:function(t){e(c.default.preview.preLoad(t))},autoSkipToPage:function(t,n){e(c.default.preview.autoSkipToPage(t,n))},pageSkipToPage:function(t,n){e(c.default.preview.pageSkipToPage(t,n))},clear:function(){e(c.default.preview.clear())},onSelectPage:function(t){e(c.default.tree.selectPage(t))},loadApp:function(t,n){e(c.default.app.loadApp(t,n))},overlayTo:function(t){e(c.default.preview.overlayTo(t))},panTo:function(t,n){e(c.default.preview.panTo(t,n))},panDone:function(t,n){e(c.default.preview.panDone(t,n))},goPrevPage:function(){e(c.default.preview.goPrevPage())},goNextPage:function(){e(c.default.preview.goNextPage())},getTeamInfo:function(t){e(c.default.preview.getTeamInfo(t))},register:function(t,n,o){e(c.default.user.register({name:t,email:n,password:o}))},openLarkShareDialog:function(t){e(c.default.share.showShareDialog(t))}}}))(b);t.default=function(e){return a.createElement(p.default.Consumer,null,(function(t){var n=t.redirectTo,o=t.showMessage;return a.createElement(P,Object.assign({},e,{redirectTo:n,showMessage:o}))}))}},2392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2393);n(2394);var r=function(e){var t=e.url,n=e.onClick,r=e.children;return o.createElement("div",{className:"no-page",onClick:n},o.createElement("div",{className:"no-page-icon"},t?o.createElement("a",{href:t},o.createElement("img",{src:a})):o.createElement("img",{src:a}),o.createElement("div",{className:"no-page-msg"},r)))};r.defaultProps={url:"",onClick:null,children:""},t.default=r},2393:function(e,t,n){e.exports=n.p+"assets/no-page.58fbbdb7f8381add6bfb26a5e99b4962.svg"},2394:function(e,t,n){},2395:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(47),i=n(2396),s=n(2397),l=n(2398),c=n(2399),u=n(2400),d=n(2401),p=n(2325),f=n(2402);n(2403);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getTargetImage=function(){switch(n.props.type){case r.CommonErrorImgTypes.ErrorImg:return i;case r.CommonErrorImgTypes.NoComment:return s;case r.CommonErrorImgTypes.NoDocument:return l;case r.CommonErrorImgTypes.NoDynamic:return c;case r.CommonErrorImgTypes.NoImage:return u;case r.CommonErrorImgTypes.NoPage:return d;case r.CommonErrorImgTypes.NoSearchResult:return p;case r.CommonErrorImgTypes.NoBrowsingHistory:return f;default:return i}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.width,o=e.height;return a.createElement("div",{className:"error-page-wrapper"},a.createElement("img",{src:this.getTargetImage(),alt:"",width:n,height:o}),t&&a.createElement("div",{className:"img-content"},t))}}]),t}(a.Component);h.defaultProps={width:160,height:160,type:r.CommonErrorImgTypes.ErrorImg},t.default=h},2396:function(e,t,n){e.exports=n.p+"assets/error_img.9ca7d825389166658a58726f7d7c8f2d.png"},2397:function(e,t,n){e.exports=n.p+"assets/no_comment.f7a1cd0ef87ab2302b66156ba772a6e2.png"},2398:function(e,t,n){e.exports=n.p+"assets/no_document.2ef54a24d385e2f1dec1f43b0ba01597.png"},2399:function(e,t,n){e.exports=n.p+"assets/no_dynamic.f8b172bfcfd32cea32f8aa4d995435b5.png"},2400:function(e,t,n){e.exports=n.p+"assets/no_image.51f29cbdaefcc7a84f3ac93fc96ff8de.png"},2401:function(e,t,n){e.exports=n.p+"assets/no_page.d363b436fadbe687e7b738e20a7729f5.png"},2402:function(e,t,n){e.exports=n.p+"assets/no_browsing_history.3e25363b426d6f2d2abcf2a7db0f9b5f.png"},2403:function(e,t,n){},2404:function(e,t,n){}}]);